<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Packaging | Was ich so treibe...]]></title>
  <link href="http://uli-heller.github.com/blog/categories/packaging/atom.xml" rel="self"/>
  <link href="http://uli-heller.github.com/"/>
  <updated>2013-08-05T07:12:34+02:00</updated>
  <id>http://uli-heller.github.com/</id>
  <author>
    <name><![CDATA[Uli Heller]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Abhängigkeiten für Debian-Paketbau installieren]]></title>
    <link href="http://uli-heller.github.com/blog/2013/06/01/build-dependencies/"/>
    <updated>2013-06-01T17:30:00+02:00</updated>
    <id>http://uli-heller.github.com/blog/2013/06/01/build-dependencies</id>
    <content type="html"><![CDATA[<p>Normalerweise spiele ich alle zum Bau eines Debian-Paketes notwendigen
Programme ein mittels <code>sudo apt-get build-dep {paketname}</code>. Blöderweise
geht das nicht, wenn das zu bauende Paket nicht aus einem
Repository &ldquo;geladen&rdquo; werden soll, so zum Beispiel wenn ich nur die
Quelltexte und die DSC-Datei des Paketes vorliegen habe.</p>

<p>Nachfolgend beschreibe ich am Beispiel von MUFFIN, wie man die Pakete
dennoch ohne allzuviel Tipparbeit installieren kann.</p>

<!-- more -->


<h2>Quelltexte herunterladen</h2>

<p>Beispielsweise von <a href="https://github.com/linuxmint/muffin/archive/1.8.2.tar.gz">https://github.com/linuxmint/muffin/archive/1.8.2.tar.gz</a></p>

<h2>Quelltexte entpacken</h2>

<ul>
<li><code>gzip -cd muffin-1.8.2.tar.gz|tar xf -</code></li>
<li><code>cd muffin-1.8.2</code></li>
</ul>


<h2>Abhängigkeiten anzeigen</h2>

<ul>
<li><code>dpkg-buildpackage</code></li>
</ul>


<p>&hellip; liefert eine Ausgabe der Art:</p>

<p><code>
...
dpkg-checkbuilddeps: Unmet build dependencies: debhelper (&gt;= 8) dh-autoreconf intltool (&gt;= 0.34.90) libgtk-3-dev (&gt;= 3.0.8-1~) libcanberra-gtk3-dev gobject-introspection (&gt;= 0.9.12-5~) libgirepository1.0-dev (&gt;= 0.9.12) libjson-glib-dev (&gt;= 0.13.2-1~) libclutter-1.0-dev (&gt;= 1.7.5) libpango1.0-dev (&gt;= 1.2.0) libgconf2-dev (&gt;= 2.6.1-2) libglib2.0-dev (&gt;= 2.6.0) libstartup-notification0-dev (&gt;= 0.7) libxcomposite-dev (&gt;= 1:0.2) libxfixes-dev libxrender-dev libxdamage-dev libxcursor-dev libxinerama-dev libxext-dev libxrandr-dev gnome-doc-utils (&gt;= 0.8) gnome-pkg-tools (&gt;= 0.10) gsettings-desktop-schemas-dev (&gt;= 3.3.0)
</code></p>

<h2>Abhängigkeiten installieren</h2>

<pre><code>dpkg-checkbuilddeps 2&gt;&amp;1 \
| sed                    \
  -e "s/^.*: //"         \
  -e "s/([^(]*)//g"      \
|sudo xargs apt-get install -y
</code></pre>

<h2>Paket bauen</h2>

<ul>
<li><code>dpkg-buildpackage</code></li>
</ul>


<p>&hellip; läuft nun durch!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Dovecot: Aktualisierung mit Pigeonhole]]></title>
    <link href="http://uli-heller.github.com/blog/2013/04/19/pigeonhole/"/>
    <updated>2013-04-19T06:00:00+02:00</updated>
    <id>http://uli-heller.github.com/blog/2013/04/19/pigeonhole</id>
    <content type="html"><![CDATA[<h1>Dovecot: Aktualisierung des Debian-Paketes mit Pigeonhole</h1>

<p>Gestern oder heute wurde die Version 2.2.1 von Dovecot veröffentlicht.
Natürlich habe ich gleich versucht, mein Debian-Paket zu aktualisieren:</p>

<ul>
<li><code>cd .../dovecot-2.2.0</code></li>
<li><code>uupdate -u ../dovecot-2.2.1.tar.gz</code></li>
<li><code>cd ../dovecot-2.2.1</code></li>
<li><code>dpkg-buildpackage</code></li>
</ul>


<p>Dummerweise klappt das nicht! Pigeonhole scheint zu fehlen, so dass
schon die Anwendung der Quilt-Patches scheitert.</p>

<!-- more -->


<p>Mein Dovecot-Debian-Paket beinhaltet u.a. auch Pigeonhole.
Pigeonhole wird separat zum Herunterladen angeboten, im Debian-Paket
erscheint es aber als Patch unterhalb von debian/patches. Das ist ein
gewisses Problem, weil man das heruntergeladene Paket dann immer erst
in einen Patch umwandeln muß.</p>

<p>Deshalb mein Ziel: Ich würde das Pigeonhole-Paket gerne möglichst
unverändert in&rsquo;s Dovecot-Debian-Paket einbinden!</p>

<!-- more -->


<h2>Ausgangspunkt</h2>

<p>Ausgangspunkt ist das bestehende Dovecot-Debian-Paket in der Version 2.2.0.
Es kann mit <code>dpkg-buildpackage</code> neu erzeugt werden.</p>

<p>Wir wissen, dass es eine neue Version 2.2.1 von Dovecot gibt. Die haben wir
auch schon heruntergeladen. Von Pigeonhole gibt es keine neue Version, also
verwenden wir die alte einfach weiter.</p>

<h2>Pigeonhole vorbereiten</h2>

<ul>
<li><code>cp dovecot_2.2.0.orig-pigeonhole.tar.bz2  dovecot_2.2.1.orig-pigeonhole.tar.bz2</code></li>
</ul>


<h2>Dovecot vorbereiten</h2>

<ul>
<li><code>cd .../dovecot-2.2.0</code></li>
<li><code>uupdate -u ../dovecot-2.2.1.tar.gz</code></li>
<li><code>cd ../dovecot-2.2.1</code></li>
</ul>


<h2>Dovecot/Pigeonhole sichten</h2>

<p>Prüfen: Gibt es innerhalb des Dovecot-Verzeichnisses nun ein Verzeichnis für
Pigeonhole? &ndash;> Nein!</p>

<h2>Pigeonhole auspacken und umbenennen</h2>

<ul>
<li><code>bzip2 -cd ../dovecot_2.2.1.orig-pigeonhole.tar.bz2|tar xf -</code></li>
<li><code>mv dovecot-2-2-pigeonhole-70f0b7140939 pigeonhole</code></li>
</ul>


<h2>Dovecot neu erzeugen</h2>

<ul>
<li><code>dpkg-buildpackage</code></li>
</ul>


<p>Nun klappt&rsquo;s!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Pigeonhole für für mein Debian-Paket von Dovecot]]></title>
    <link href="http://uli-heller.github.com/blog/2013/04/15/pigeonhole/"/>
    <updated>2013-04-15T06:00:00+02:00</updated>
    <id>http://uli-heller.github.com/blog/2013/04/15/pigeonhole</id>
    <content type="html"><![CDATA[<h1>Dovecot: Einbinden von Pigeonhole</h1>

<p>Mein Dovecot-Debian-Paket beinhaltet u.a. auch Pigeonhole.
Pigeonhole wird separat zum Herunterladen angeboten, im Debian-Paket
erscheint es aber als Patch unterhalb von debian/patches. Das ist ein
gewisses Problem, weil man das heruntergeladene Paket dann immer erst
in einen Patch umwandeln muß.</p>

<p>Deshalb mein Ziel: Ich würde das Pigeonhole-Paket gerne möglichst
unverändert in&rsquo;s Dovecot-Debian-Paket einbinden!</p>

<!-- more -->


<h2>Ausgangspunkt</h2>

<p>Ausgangspunkt ist das bestehende Dovecot-Debian-Paket. Es kann mit
<code>dpkg-buildpackage</code> neu erzeugt werden.</p>

<h2>Pakete herunterladen</h2>

<ul>
<li><a href="http://dovecot.org/releases/2.2/dovecot-2.2.0.tar.gz">Dovecot-2.2.0</a></li>
<li><a href="http://hg.rename-it.nl/dovecot-2.2-pigeonhole/archive/tip.tar.bz2">Pigeonhole für Dovecot-2.2.0</a></li>
</ul>


<h2>Dovecot-Debian-Paket anpassen auf neue Version</h2>

<ul>
<li><code>uupdate -u ../dovecot-2.2.0.tar.gz -v 2:2.2.0</code></li>
<li><code>cd ../dovecot-2.2.0</code></li>
</ul>


<h2>Verweise auf Pigeonhole-Patch entfernen</h2>

<ul>
<li><code>cd ./dovecot-2.2.0</code></li>
<li><code>rm debian/patches/pigeonhole.patch</code></li>
<li><code>sed -i "s/pigeonhole.patch/#pigeonhole.patch/" debian/patches/series</code></li>
</ul>


<h2>Verwendung des Pigeonhole-Paketes vorbereiten</h2>

<ul>
<li><code>cp dovecot-2-2-pigeonhole-70f0b7140939.tar.bz2 dovecot_2.2.0.orig-pigeonhole.tar.bz2</code></li>
<li><code>cd ./dovecot-2.2.0</code></li>
<li><code>mkdir pigeonhole</code></li>
<li><code>tar -C pigeonhole --strip-components=1 -jxf ../dovecot_2.2.0.orig-pigeonhole.tar.bz2</code></li>
</ul>


<h2>Paket neu erzeugen</h2>

<ul>
<li><code>cd ./dovecot-2.2.0</code></li>
<li><code>dpkg-buildpackage</code></li>
</ul>


<h2>Links</h2>

<ul>
<li><a href="http://raphaelhertzog.com/2010/09/07/how-to-use-multiple-upstream-tarballs-in-debian-source-packages/">http://raphaelhertzog.com/2010/09/07/how-to-use-multiple-upstream-tarballs-in-debian-source-packages/</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Quilt für mein Debian-Paket von Git]]></title>
    <link href="http://uli-heller.github.com/blog/2013/04/14/quilt-fuer-gitdeb/"/>
    <updated>2013-04-14T12:00:00+02:00</updated>
    <id>http://uli-heller.github.com/blog/2013/04/14/quilt-fuer-gitdeb</id>
    <content type="html"><![CDATA[<h1>Quilt: Umstellung der Patchverwaltung meines Git-Debian-Paketes auf Quilt</h1>

<p>Mein Git-Debian-Paket verwendet bislang keine vernünftige Patchverwaltung.
Stattdessen werden bei der Erzeugung des Paketes einfach alle Patches
unterhalb von debian/diff der Reihe nach angewandt. Blöderweise fallen so
gescheiterte Patchanwendungen nicht auf, außerdem werden im Source-Paket
teilweise Original-Dateien modifiziert &ndash; vermutlich weil einige Patches
nicht sauber zurückgerollt werden.</p>

<p>Also: Ich will Quilt haben!</p>

<!-- more -->


<h2>Sichtung des Debian-Paketes von Subversion</h2>

<ul>
<li>Patches liegen unter debian/patches und nicht unter debian/diff</li>
<li>Es gibt eine Datei namens debian/patches/series, die alle Patches auflistet</li>
<li>In debian/rules sind einige Änderungen vorzunehmen</li>
</ul>


<p>Die ersten beiden Punkte sind schnell erledigt:</p>

<ul>
<li><code>mv debian/diff debian/patches</code></li>
<li><code>cd debian/patches; (ls|grep -v series) &gt;series</code></li>
</ul>


<p>Bleibt noch die Anpassung von debian/rules!</p>

<h2>Anpassungen an &ldquo;debian/rules&rdquo;</h2>

<p>An der Datei &ldquo;debian/rules&rdquo; müssen qualitativ diese Änderungen vorgenommen
werden:</p>

<ul>
<li>Einbinden der Datei /usr/share/quilt/quilt.make</li>
<li>Ziele &ldquo;patch&rdquo; und &ldquo;patch-stamp&rdquo; entfernen</li>
<li>Ziele &ldquo;debian/stamp-autogen&rdquo; und &ldquo;debian/stamp-configure&rdquo; neu aufnehmen
Bei &ldquo;debian/stamp-configure&rdquo; wird ein Verweis auf &ldquo;patches&rdquo; angelegt</li>
<li>Verweise auf &ldquo;patch-stamp&rdquo; ersetzen durch &ldquo;$(QUILT_STAMPFN)&rdquo;</li>
<li>Im Ziel &ldquo;clean&rdquo; diese Änderungen vornehmen:

<ul>
<li>Neue Abhängigkeit zu &ldquo;unpatch&rdquo; festlegen</li>
<li>Neuer Aufruf: dh_testdir</li>
<li>Neuer Aufruf: dh_clean</li>
<li>Verweis auf &ldquo;patches&rdquo; löschen</li>
<li>Manuelle Logik zum Zurücknehmen der Patches entfernen</li>
</ul>
</li>
</ul>


<p>Die Änderungen sind im nachfolgenden DIFF zusammengefasst.</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>Anpassungen an debian/rules </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
</pre></td><td class='code'><pre><code class='diff'><span class='line'>&amp;mdash;&amp;ndash; ../git-1.8.2.1_ok/debian/rules  2013-04-13 19:55:00.061153212 +0200
</span><span class='line'><span class="gi">+++ debian/rules    2013-04-14 09:36:24.782564149 +0200</span>
</span><span class='line'><span class="gu">@@ -37,19 +37,30 @@</span>
</span><span class='line'> TMP =$(shell pwd)/tmp
</span><span class='line'> GIT =$(shell pwd)/debian/git&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;-patch: deb-checkdir patch-stamp
</span><span class='line'><span class="gd">-patch-stamp:</span>
</span><span class='line'>&amp;ndash;   cp gitk-git/gitk gitk-git/gitk.uli.orig
</span><span class='line'>&amp;ndash;   for i in &lt;code&gt;ls -1 debian/diff/*.diff debian/diff/*.patch \
</span><span class='line'><span class="gd">-       2&amp;gt;/dev/null || :&lt;/code&gt;; do \</span>
</span><span class='line'>&amp;ndash;     patch -p1 -N -r- &amp;lt;$$i || test $$? = 1 || exit 1; \
</span><span class='line'>&amp;ndash;   done
</span><span class='line'>&amp;ndash;   touch patch-stamp
</span><span class='line'><span class="gi">+include /usr/share/quilt/quilt.make</span>
</span><span class='line'><span class="gi">+</span>
</span><span class='line'><span class="gi">+debian/stamp-autogen:  $(QUILT_STAMPFN)</span>
</span><span class='line'><span class="gi">+   $(DONT_BE_ROOT)</span>
</span><span class='line'><span class="gi">+   ./autogen.sh</span>
</span><span class='line'><span class="gi">+   touch $@</span>
</span><span class='line'><span class="gi">+</span>
</span><span class='line'><span class="gi">+debian/stamp-configure:    $(QUILT_STAMPFN) debian/stamp-autogen</span>
</span><span class='line'><span class="gi">+   dh_testdir</span>
</span><span class='line'><span class="gi">+   test -e patches || ln -s debian/patches patches</span>
</span><span class='line'><span class="gi">+</span>
</span><span class='line'><span class="gi">+#patch: deb-checkdir patch-stamp</span>
</span><span class='line'><span class="gi">+#patch-stamp:</span>
</span><span class='line'><span class="gi">+#  cp gitk-git/gitk gitk-git/gitk.uli.orig</span>
</span><span class='line'><span class="gi">+#  for i in &lt;code&gt;ls -1 debian/diff/*.diff debian/diff/*.patch \</span>
</span><span class='line'><span class="gi">+#      2&amp;gt;/dev/null || :&lt;/code&gt;; do \</span>
</span><span class='line'><span class="gi">+#    patch -p1 -N -r- &amp;lt;$$i || test $$? = 1 || exit 1; \</span>
</span><span class='line'><span class="gi">+#  done</span>
</span><span class='line'><span class="gi">+#  touch patch-stamp&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;p&gt; build: build-arch build-indep&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt; build-arch: deb-checkdir build-arch-stamp
</span><span class='line'><span class="gd">-build-arch-stamp: patch-stamp</span>
</span><span class='line'><span class="gi">+build-arch-stamp: $(QUILT_STAMPFN)&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;-$(CC) -v
</span><span class='line'>DESTDIR=&#39;$(GIT)&#39; $(MAKE) all $(OPTS)
</span><span class='line'>cd contrib/subtree; DESTDIR=&#39;$(GIT)&#39; $(MAKE) all $(OPTS)
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;@@ -66,7 +77,7 @@&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;touch build-arch-stamp
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt; build-indep: deb-checkdir build-indep-stamp
</span><span class='line'><span class="gd">-build-indep-stamp: patch-stamp build-arch-stamp</span>
</span><span class='line'><span class="gi">+build-indep-stamp: $(QUILT_STAMPFN) build-arch-stamp&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;: &#39;Work around bug #478524&#39;
</span><span class='line'>set -e; if test &#39;$(BUILD_DOCS)&#39; = 1; \
</span><span class='line'>then \
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;@@ -74,14 +85,17 @@&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;fi
</span><span class='line'>touch build-indep-stamp
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;-clean: deb-checkdir
</span><span class='line'><span class="gi">+clean: deb-checkdir unpatch</span>
</span><span class='line'><span class="gi">+   dh_testdir</span>
</span><span class='line'><span class="gi">+   dh_clean</span>
</span><span class='line'><span class="gi">+   $(RM) patches&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;$(MAKE) clean $(OPTS)
</span><span class='line'>cd contrib/subtree; $(MAKE) clean $(OPTS)
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;ul&gt;
</span><span class='line'>&lt;li&gt;! test -e patch-stamp || \&lt;/li&gt;
</span><span class='line'>&lt;li&gt;  for i in `ls -1r debian/diff/&lt;em&gt;.diff debian/diff/&lt;/em&gt;.patch \&lt;/li&gt;
</span><span class='line'>&lt;li&gt;&lt;pre&gt;&lt;code&gt;  2&amp;gt;/dev/null || :`; do \
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
</span><span class='line'>&lt;li&gt;&lt;pre&gt;&lt;code&gt;patch -p1 -NR -r- &amp;lt;$$i || test $$? = 1 || exit 1; \
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;&lt;/li&gt;
</span><span class='line'>&lt;li&gt;  done
</span><span class='line'><span class="gi">+#  ! test -e patch-stamp || \</span>
</span><span class='line'><span class="gi">+#    for i in &lt;code&gt;ls -1r debian/diff/*.diff debian/diff/*.patch \</span>
</span><span class='line'><span class="gi">+#        2&amp;gt;/dev/null || :&lt;/code&gt;; do \</span>
</span><span class='line'><span class="gi">+#      patch -p1 -NR -r- &amp;lt;$$i || test $$? = 1 || exit 1; \</span>
</span><span class='line'><span class="gi">+#    done</span>
</span><span class='line'>rm -rf &amp;lsquo;$(TMP)&amp;rsquo;
</span><span class='line'>rm -f patch-stamp build-arch-stamp build-indep-stamp
</span><span class='line'>rm -rf &amp;lsquo;$(GIT)&amp;rsquo; &amp;lsquo;$(GIT)&amp;rsquo;-doc &amp;lsquo;$(GIT)&amp;rsquo;-arch &amp;lsquo;$(GIT)&amp;rsquo;-cvs
</span></code></pre></td></tr></table></div></figure></notextile></div></li>
</ul>


<h2>Neuerzeugung des Paketes</h2>

<p>Nun kann versucht werden, das Paket neu zu erzeugen mit <code>dpkg-buildpackage</code>.
Erwartungsgemäß scheitert die Erzeugung, weil einige Patches nicht sauber
durchlaufen. Korrigiert habe ich das so:</p>

<ul>
<li>In &ldquo;debian/patches/series&rdquo; folgende Patches deaktiviert:

<ul>
<li>0005-gitk-use-symbolic-font-names-sans-and-monospace-when-.diff</li>
<li>0006-gitk-Skip-over-AUTHOR-COMMIT_DATE-when-searching-all-.diff</li>
</ul>
</li>
<li>Bei allen übrigen Patches:

<ul>
<li><code>quilt push -f</code></li>
<li><code>quilt refresh</code></li>
<li><code>dpkg-buildpackage</code></li>
<li>&hellip; so oft wiederholen, bis es durchläuft</li>
</ul>
</li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Dovecot-2.2 - DEB-Paket erzeugen]]></title>
    <link href="http://uli-heller.github.com/blog/2013/03/11/dovecot/"/>
    <updated>2013-03-11T09:00:00+01:00</updated>
    <id>http://uli-heller.github.com/blog/2013/03/11/dovecot</id>
    <content type="html"><![CDATA[<h1>Ubuntu-Pakete aktualisieren &ndash; Dovecot</h1>

<p>Heute soll eine neue Version von Dovecot erzeugt werden.
Grob geht&rsquo;s so:</p>

<ul>
<li>Quellen der Standardversion von Ubuntu runterladen und kompilieren</li>
<li>Aktualisieren auf die gewünschte neue Version (2.2.rc2)</li>
<li>Neue Version kompilieren</li>
</ul>


<p>Mal sehen, ob&rsquo;s klappt wie vorgesehen!</p>

<!-- more -->


<h2>Standardversion von Ubuntu</h2>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>Standardversion herunterladen und bauen </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Build-Verzeichnis anlegen und reinwechseln&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;mkdir -p /build/dovecot
</span><span class='line'><span class="nb">cd</span> /build/dovecot&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Quellen zum Ubuntu-Paket runterladen &amp;ndash; 2.0.19-0ubuntu2&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;apt-get <span class="nb">source </span>dovecot&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Abhängigkeiten nachinstallieren&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;sudo apt-get build-dep dovecot&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Ubuntu-Paket erzeugen&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;cd dovecot-2.0.19
</span><span class='line'>dpkg-buildpackage&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&amp;hellip; läuft hoffentlich ohne Probleme durch&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;quilt pop -a
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h2>Aktualisierung auf 2.2.rc2</h2>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>Aktualisierung auf 2.2.rc2 </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;In Build-Verzeichnis reinwechseln&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;cd /build/dovecot&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Quellen zu Dovecot-2.2.rc1 runterladen&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;wget &lt;a <span class="nv">href</span><span class="o">=</span><span class="s2">&quot;http://syksy.dovecot.org/releases/2.2/rc/dovecot-2.2.rc2.tar.gz&quot;</span>&gt;http://syksy.dovecot.org/releases/2.2/rc/dovecot-2.2.rc2.tar.gz&lt;/a&gt;&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Erster Versuch&amp;hellip;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;cd dovecot-2.0.19
</span><span class='line'>uupdate -u ../dovecot-2.2.rc2.tar.gz&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&amp;hellip; zeigt leider eine Fehlermeldung an:&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;uupdate: new version number not recognized from given filename&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Please run uupdate with the -v option&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Also nochmal&amp;hellip;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;uupdate -u ../dovecot-2.2.rc2.tar.gz -v 2.2.rc2&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;OK, keine Fehlermeldung.&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Wechseln in&amp;rsquo;s neue Verzeichnis und dann debian/changelog anpassen&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;cd ../dovecot-2.2.rc2
</span><span class='line'>jmacs debian/changelog <span class="c"># Details: Siehe nachfolgender DIFF&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Ubuntu-Paket erzeugen&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;dpkg-buildpackage&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Mecker wg. fix-racey-restarts.patch&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&amp;ndash; Kein einziger Patch klappt&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&amp;ndash; Oft erscheint &amp;lsquo;Reversed <span class="o">(</span>or previously applied<span class="o">)</span> patch detected!  Skipping patch.&amp;rsquo;&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&amp;ndash;&gt; Wir blenden den Patch aus&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;quilt pop -a
</span><span class='line'>jmacs debian/patches/series <span class="c"># Details: Siehe nachfolgender DIFF&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&amp;hellip; noch ein paar Iterationen wie zuvor&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;dpkg-buildpackage&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;Scheitert nun ganz am Ende &amp;ndash; pigeonhole passt nicht so richtig&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&amp;hellip; wir versuchen&amp;rsquo;s mit dovecot-2.1-pigeonhole-0.3.3.tar.gz&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&amp;hellip; klappt auch nicht &amp;ndash; gleicher Fehler!&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&amp;hellip; dann halt mit dovecot-2.2-pigeonhole-tip&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&amp;hellip; klappt besser, jetzt &amp;ldquo;zickt&amp;rdquo; noch DRAC&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;h1&gt;&amp;hellip; läßt sich auch leicht korrigieren&lt;/h1&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>Änderungen an debian/changelog </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='diff'><span class='line'><span class="gh">diff -u debian/changelog~ debian/changelog</span>
</span><span class='line'>&amp;mdash;&amp;ndash; debian/changelog~   2013-03-11 09:09:19.000000000 +0100
</span><span class='line'><span class="gi">+++ debian/changelog    2013-03-11 09:11:53.435109570 +0100</span>
</span><span class='line'><span class="gu">@@ -1,8 +1,8 @@</span>
</span><span class='line'><span class="gd">-dovecot (1:2.2.rc2-0ubuntu1) precise; urgency=low</span>
</span><span class='line'><span class="gi">+dovecot (1:2.2.rc2-0dp01~precise1) precise; urgency=low&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;ul&gt;
</span><span class='line'>&lt;li&gt;&lt;p&gt; New upstream release&lt;/p&gt;&lt;/li&gt;
</span><span class='line'>&lt;li&gt;&lt;p&gt;&amp;mdash; Uli Heller &lt;a href=&quot;&amp;#x6d;&amp;#97;&amp;#105;&amp;#x6c;&amp;#116;&amp;#111;&amp;#58;&amp;#117;&amp;#108;&amp;#x69;&amp;#64;&amp;#x75;&amp;#98;&amp;#x75;&amp;#x6e;&amp;#116;&amp;#117;&amp;#x31;&amp;#50;&amp;#x30;&amp;#x34;&amp;#46;&amp;#x64;&amp;#97;&amp;#x65;&amp;#x6d;&amp;#x6f;&amp;#110;&amp;#x73;&amp;#x2d;&amp;#112;&amp;#111;&amp;#x69;&amp;#110;&amp;#x74;&amp;#46;&amp;#x63;&amp;#x6f;&amp;#109;&quot;&gt;&amp;#x75;&amp;#108;&amp;#105;&amp;#64;&amp;#x75;&amp;#x62;&amp;#117;&amp;#x6e;&amp;#116;&amp;#x75;&amp;#49;&amp;#x32;&amp;#48;&amp;#52;&amp;#46;&amp;#100;&amp;#x61;&amp;#x65;&amp;#109;&amp;#111;&amp;#110;&amp;#x73;&amp;#45;&amp;#112;&amp;#111;&amp;#x69;&amp;#110;&amp;#116;&amp;#46;&amp;#x63;&amp;#x6f;&amp;#x6d;&lt;/a&gt;  Mon, 11 Mar 2013 09:09:19 +0100&lt;/p&gt;&lt;/li&gt;
</span><span class='line'>&lt;li&gt;&amp;mdash; Uli Heller &lt;a href=&quot;&amp;#109;&amp;#x61;&amp;#105;&amp;#x6c;&amp;#x74;&amp;#111;&amp;#58;&amp;#x75;&amp;#x6c;&amp;#105;&amp;#46;&amp;#x68;&amp;#x65;&amp;#x6c;&amp;#108;&amp;#101;&amp;#114;&amp;#64;&amp;#100;&amp;#x61;&amp;#x65;&amp;#x6d;&amp;#x6f;&amp;#x6e;&amp;#115;&amp;#x2d;&amp;#112;&amp;#111;&amp;#x69;&amp;#x6e;&amp;#x74;&amp;#x2e;&amp;#99;&amp;#x6f;&amp;#109;&quot;&gt;&amp;#x75;&amp;#x6c;&amp;#105;&amp;#46;&amp;#104;&amp;#x65;&amp;#x6c;&amp;#108;&amp;#101;&amp;#114;&amp;#64;&amp;#100;&amp;#97;&amp;#101;&amp;#x6d;&amp;#x6f;&amp;#x6e;&amp;#115;&amp;#x2d;&amp;#112;&amp;#111;&amp;#105;&amp;#110;&amp;#116;&amp;#x2e;&amp;#x63;&amp;#x6f;&amp;#109;&lt;/a&gt;  Mon, 11 Mar 2013 09:09:19 +0100&lt;/li&gt;
</span><span class='line'>&lt;/ul&gt;
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>&lt;p&gt; dovecot (1:2.0.19-0ubuntu2) precise-proposed; urgency=low&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>Änderungen an debian/patches/series </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='diff'><span class='line'><span class="gh">diff -u debian/patches/series~ debian/patches/series</span>
</span><span class='line'>&amp;mdash;&amp;ndash; debian/patches/series~  2012-06-28 23:34:08.000000000 +0200
</span><span class='line'><span class="gi">+++ debian/patches/series   2013-03-11 09:18:30.167126242 +0100</span>
</span><span class='line'><span class="gu">@@ -2,5 +2,5 @@</span>
</span><span class='line'> dovecot-drac.patch
</span><span class='line'> split-protocols.patch
</span><span class='line'> fix-mail_plugin_dir-default.patch
</span><span class='line'><span class="gd">-fix-racey-restarts.patch</span>
</span><span class='line'><span class="gi">+#fix-racey-restarts.patch</span>
</span><span class='line'> bug-1018579.patch
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h2>Pigeonhole</h2>

<p>Pigeonhole wird seperat von Dovecot entwickelt. Ich habe die neuen Versionen heruntergeladen von
<a href="http://pigeonhole.dovecot.org/">http://pigeonhole.dovecot.org/</a>.</p>

<p>Für die DEB-Erstellung muß dann noch ein Patch dafür erzeugt werden. Das geht am besten so:</p>

<ul>
<li>Temporäre Verzeichnisse anlegen: <code>mkdir -p tmp/a tmp/b</code></li>
<li>Wechseln in&rsquo;s Verzeichnis b: <code>cd tmp/b</code></li>
<li>Pigeonhole auspacken: <code>gzip -cd .../dovecot-2-2-pigeonhole-b75b00760b86.tar.gz|tar xf -</code></li>
<li>Verzeichnis umbenennen: <code>mv dove* pigeonhole</code></li>
<li>Patch erstellen: <code>cd ..; diff -Nur a b &gt;pigeonhole.patch</code></li>
</ul>


<h2>Diff</h2>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span> (dovecot_20_22.diff)</span> <a href='/downloads/code/ubuntu/dovecot_20_22.diff'>download</a></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
<span class='line-number'>147</span>
<span class='line-number'>148</span>
<span class='line-number'>149</span>
<span class='line-number'>150</span>
<span class='line-number'>151</span>
<span class='line-number'>152</span>
<span class='line-number'>153</span>
</pre></td><td class='code'><pre><code class='diff'><span class='line'><span class="gh">diff -Nur dovecot-2.0.19/debian/changelog dovecot-2.2.rc2/debian/changelog</span>
</span><span class='line'><span class="gd">--- dovecot-2.0.19/debian/changelog	2012-06-28 23:38:39.000000000 +0200</span>
</span><span class='line'><span class="gi">+++ dovecot-2.2.rc2/debian/changelog	2013-03-11 09:23:35.000000000 +0100</span>
</span><span class='line'><span class="gu">@@ -1,3 +1,9 @@</span>
</span><span class='line'><span class="gi">+dovecot (1:2.2.rc2-0dp01~precise1) precise; urgency=low</span>
</span><span class='line'><span class="gi">+</span>
</span><span class='line'><span class="gi">+  * New upstream release</span>
</span><span class='line'><span class="gi">+</span>
</span><span class='line'><span class="gi">+ -- Uli Heller &lt;uli.heller@daemons-point.com&gt;  Mon, 11 Mar 2013 09:09:19 +0100</span>
</span><span class='line'><span class="gi">+</span>
</span><span class='line'> dovecot (1:2.0.19-0ubuntu2) precise-proposed; urgency=low
</span><span class='line'>
</span><span class='line'>   * Fix panic and core dump, cherry picked from upstream Mercurial.
</span><span class='line'><span class="gh">diff -Nur dovecot-2.0.19/debian/patches/dovecot-drac.patch dovecot-2.2.rc2/debian/patches/dovecot-drac.patch</span>
</span><span class='line'><span class="gd">--- dovecot-2.0.19/debian/patches/dovecot-drac.patch	2012-06-28 23:33:07.000000000 +0200</span>
</span><span class='line'><span class="gi">+++ dovecot-2.2.rc2/debian/patches/dovecot-drac.patch	2013-03-11 11:20:48.000000000 +0100</span>
</span><span class='line'><span class="gu">@@ -42,7 +42,7 @@</span>
</span><span class='line'> + *   http://dovecot.org/patches/1.1/drac.c
</span><span class='line'> + */
</span><span class='line'> +#include &quot;lib.h&quot;
</span><span class='line'><span class="gd">-+#include &quot;network.h&quot;</span>
</span><span class='line'><span class="gi">++#include &quot;net.h&quot;</span>
</span><span class='line'> +#include &quot;ioloop.h&quot;
</span><span class='line'> +#include &quot;mail-user.h&quot;
</span><span class='line'> +#include &quot;mail-storage-private.h&quot;
</span><span class='line'><span class="gh">diff -Nur dovecot-2.0.19/debian/patches/fix-mail_plugin_dir-default.patch dovecot-2.2.rc2/debian/patches/fix-mail_plugin_dir-default.patch</span>
</span><span class='line'><span class="gd">--- dovecot-2.0.19/debian/patches/fix-mail_plugin_dir-default.patch	2012-06-28 23:33:07.000000000 +0200</span>
</span><span class='line'><span class="gi">+++ dovecot-2.2.rc2/debian/patches/fix-mail_plugin_dir-default.patch	2013-03-11 10:55:09.000000000 +0100</span>
</span><span class='line'><span class="gu">@@ -8,11 +8,11 @@</span>
</span><span class='line'>  doc/example-config/conf.d/10-mail.conf |    2 +-
</span><span class='line'>  1 files changed, 1 insertions(+), 1 deletions(-)
</span><span class='line'>
</span><span class='line'><span class="gd">-diff --git a/doc/example-config/conf.d/10-mail.conf b/doc/example-config/conf.d/10-mail.conf</span>
</span><span class='line'><span class="gd">-index fe5cc31..4b918ed 100644</span>
</span><span class='line'><span class="gd">---- a/doc/example-config/conf.d/10-mail.conf</span>
</span><span class='line'><span class="gd">-+++ b/doc/example-config/conf.d/10-mail.conf</span>
</span><span class='line'><span class="gd">-@@ -200,7 +200,7 @@</span>
</span><span class='line'><span class="gi">+Index: dovecot-2.2.rc2/doc/example-config/conf.d/10-mail.conf</span>
</span><span class='line'><span class="gi">+===================================================================</span>
</span><span class='line'><span class="gi">+--- dovecot-2.2.rc2.orig/doc/example-config/conf.d/10-mail.conf	2013-02-22 12:20:04.000000000 +0100</span>
</span><span class='line'><span class="gi">++++ dovecot-2.2.rc2/doc/example-config/conf.d/10-mail.conf	2013-03-11 10:55:07.635357407 +0100</span>
</span><span class='line'><span class="gi">+@@ -201,7 +201,7 @@</span>
</span><span class='line'>  #auth_socket_path = /var/run/dovecot/auth-userdb
</span><span class='line'>
</span><span class='line'>  # Directory where to look up mail plugins.
</span><span class='line'><span class="gu">@@ -21,4 +21,3 @@</span>
</span><span class='line'>
</span><span class='line'>  # Space separated list of plugins to load for all services. Plugins specific to
</span><span class='line'>  # IMAP, LDA, etc. are added to this list in their own .conf files.
</span><span class='line'><span class="gd">--- </span>
</span><span class='line'><span class="gh">diff -Nur dovecot-2.0.19/debian/patches/pigeonhole.patch dovecot-2.2.rc2/debian/patches/pigeonhole.patch</span>
</span><span class='line'><span class="gd">--- dovecot-2.0.19/debian/patches/pigeonhole.patch	2012-06-28 23:33:07.000000000 +0200</span>
</span><span class='line'><span class="gi">+++ dovecot-2.2.rc2/debian/patches/pigeonhole.patch	2013-03-11 10:49:09.000000000 +0100</span>
</span><span class='line'>{not included}
</span><span class='line'><span class="gh">diff -Nur dovecot-2.0.19/debian/patches/series dovecot-2.2.rc2/debian/patches/series</span>
</span><span class='line'><span class="gd">--- dovecot-2.0.19/debian/patches/series	2012-06-28 23:34:08.000000000 +0200</span>
</span><span class='line'><span class="gi">+++ dovecot-2.2.rc2/debian/patches/series	2013-03-11 09:23:47.000000000 +0100</span>
</span><span class='line'><span class="gu">@@ -2,5 +2,5 @@</span>
</span><span class='line'> dovecot-drac.patch
</span><span class='line'> split-protocols.patch
</span><span class='line'> fix-mail_plugin_dir-default.patch
</span><span class='line'><span class="gd">-fix-racey-restarts.patch</span>
</span><span class='line'><span class="gd">-bug-1018579.patch</span>
</span><span class='line'><span class="gi">+#fix-racey-restarts.patch</span>
</span><span class='line'><span class="gi">+#bug-1018579.patch</span>
</span><span class='line'><span class="gh">diff -Nur dovecot-2.0.19/debian/patches/split-protocols.patch dovecot-2.2.rc2/debian/patches/split-protocols.patch</span>
</span><span class='line'><span class="gd">--- dovecot-2.0.19/debian/patches/split-protocols.patch	2012-06-28 23:33:07.000000000 +0200</span>
</span><span class='line'><span class="gi">+++ dovecot-2.2.rc2/debian/patches/split-protocols.patch	2013-03-11 10:55:06.000000000 +0100</span>
</span><span class='line'><span class="gu">@@ -12,11 +12,11 @@</span>
</span><span class='line'>  src/master/master-settings.c                       |    2 +-
</span><span class='line'>  4 files changed, 4 insertions(+), 7 deletions(-)
</span><span class='line'>
</span><span class='line'><span class="gd">-Index: dovecot/doc/example-config/dovecot.conf</span>
</span><span class='line'><span class="gi">+Index: dovecot-2.2.rc2/doc/example-config/dovecot.conf</span>
</span><span class='line'> ===================================================================
</span><span class='line'><span class="gd">---- dovecot.orig/doc/example-config/dovecot.conf	2012-03-07 08:19:52.000000000 -0500</span>
</span><span class='line'><span class="gd">-+++ dovecot/doc/example-config/dovecot.conf	2012-03-07 10:37:13.000000000 -0500</span>
</span><span class='line'><span class="gd">-@@ -16,8 +16,8 @@</span>
</span><span class='line'><span class="gi">+--- dovecot-2.2.rc2.orig/doc/example-config/dovecot.conf	2013-01-04 20:38:41.000000000 +0100</span>
</span><span class='line'><span class="gi">++++ dovecot-2.2.rc2/doc/example-config/dovecot.conf	2013-03-11 10:54:59.779357916 +0100</span>
</span><span class='line'><span class="gi">+@@ -20,8 +20,8 @@</span>
</span><span class='line'>  # options. The paths listed here are for configure --prefix=/usr
</span><span class='line'>  # --sysconfdir=/etc --localstatedir=/var
</span><span class='line'>
</span><span class='line'><span class="gu">@@ -27,10 +27,10 @@</span>
</span><span class='line'>
</span><span class='line'>  # A comma separated list of IPs or hosts where to listen in for connections.
</span><span class='line'>  # &quot;*&quot; listens in all IPv4 interfaces, &quot;::&quot; listens in all IPv6 interfaces.
</span><span class='line'><span class="gd">-Index: dovecot/pigeonhole/doc/example-config/conf.d/20-managesieve.conf</span>
</span><span class='line'><span class="gi">+Index: dovecot-2.2.rc2/pigeonhole/doc/example-config/conf.d/20-managesieve.conf</span>
</span><span class='line'> ===================================================================
</span><span class='line'><span class="gd">---- dovecot.orig/pigeonhole/doc/example-config/conf.d/20-managesieve.conf	2012-03-07 10:37:11.000000000 -0500</span>
</span><span class='line'><span class="gd">-+++ dovecot/pigeonhole/doc/example-config/conf.d/20-managesieve.conf	2012-03-07 10:37:13.000000000 -0500</span>
</span><span class='line'><span class="gi">+--- dovecot-2.2.rc2.orig/pigeonhole/doc/example-config/conf.d/20-managesieve.conf	2013-03-11 10:54:57.079337564 +0100</span>
</span><span class='line'><span class="gi">++++ dovecot-2.2.rc2/pigeonhole/doc/example-config/conf.d/20-managesieve.conf	2013-03-11 10:54:59.779357916 +0100</span>
</span><span class='line'> @@ -2,9 +2,6 @@
</span><span class='line'>  ## ManageSieve specific settings
</span><span class='line'>  ##
</span><span class='line'><span class="gu">@@ -40,12 +40,12 @@</span>
</span><span class='line'> -
</span><span class='line'>  # Service definitions
</span><span class='line'>
</span><span class='line'><span class="gd">- service managesieve-login {</span>
</span><span class='line'><span class="gd">-Index: dovecot/src/config/all-settings.c</span>
</span><span class='line'><span class="gi">+ #service managesieve-login {</span>
</span><span class='line'><span class="gi">+Index: dovecot-2.2.rc2/src/config/all-settings.c</span>
</span><span class='line'> ===================================================================
</span><span class='line'><span class="gd">---- dovecot.orig/src/config/all-settings.c	2012-03-07 08:19:52.000000000 -0500</span>
</span><span class='line'><span class="gd">-+++ dovecot/src/config/all-settings.c	2012-03-07 10:37:14.000000000 -0500</span>
</span><span class='line'><span class="gd">-@@ -1764,7 +1764,7 @@</span>
</span><span class='line'><span class="gi">+--- dovecot-2.2.rc2.orig/src/config/all-settings.c	2013-02-25 14:33:27.000000000 +0100</span>
</span><span class='line'><span class="gi">++++ dovecot-2.2.rc2/src/config/all-settings.c	2013-03-11 10:54:59.783357912 +0100</span>
</span><span class='line'><span class="gi">+@@ -2433,7 +2433,7 @@</span>
</span><span class='line'>  	.libexec_dir = PKG_LIBEXECDIR,
</span><span class='line'>  	.instance_name = PACKAGE,
</span><span class='line'>  	.import_environment = &quot;TZ&quot; ENV_SYSTEMD ENV_GDB,
</span><span class='line'><span class="gu">@@ -54,11 +54,11 @@</span>
</span><span class='line'>  	.listen = &quot;*, ::&quot;,
</span><span class='line'>  	.ssl = &quot;yes:no:required&quot;,
</span><span class='line'>  	.default_internal_user = &quot;dovecot&quot;,
</span><span class='line'><span class="gd">-Index: dovecot/src/master/master-settings.c</span>
</span><span class='line'><span class="gi">+Index: dovecot-2.2.rc2/src/master/master-settings.c</span>
</span><span class='line'> ===================================================================
</span><span class='line'><span class="gd">---- dovecot.orig/src/master/master-settings.c	2012-03-07 08:19:52.000000000 -0500</span>
</span><span class='line'><span class="gd">-+++ dovecot/src/master/master-settings.c	2012-03-07 10:37:14.000000000 -0500</span>
</span><span class='line'><span class="gd">-@@ -213,7 +213,7 @@</span>
</span><span class='line'><span class="gi">+--- dovecot-2.2.rc2.orig/src/master/master-settings.c	2013-02-18 05:47:18.000000000 +0100</span>
</span><span class='line'><span class="gi">++++ dovecot-2.2.rc2/src/master/master-settings.c	2013-03-11 10:54:59.783357912 +0100</span>
</span><span class='line'><span class="gi">+@@ -216,7 +216,7 @@</span>
</span><span class='line'>  	.libexec_dir = PKG_LIBEXECDIR,
</span><span class='line'>  	.instance_name = PACKAGE,
</span><span class='line'>  	.import_environment = &quot;TZ&quot; ENV_SYSTEMD ENV_GDB,
</span><span class='line'><span class="gh">diff -Nur dovecot-2.0.19/debian/rules dovecot-2.2.rc2/debian/rules</span>
</span><span class='line'><span class="gd">--- dovecot-2.0.19/debian/rules	2012-06-28 23:33:07.000000000 +0200</span>
</span><span class='line'><span class="gi">+++ dovecot-2.2.rc2/debian/rules	2013-03-11 11:20:33.000000000 +0100</span>
</span><span class='line'><span class="gu">@@ -47,7 +47,7 @@</span>
</span><span class='line'> 	            --disable-static
</span><span class='line'> 	$(MAKE) dovecot-config
</span><span class='line'> 	# Pigeonhole
</span><span class='line'><span class="gd">-	(cd $(PIGEONHOLE_DIR)/ &amp;&amp; \</span>
</span><span class='line'><span class="gi">+	(cd $(PIGEONHOLE_DIR)/ &amp;&amp; sh ./autogen.sh \</span>
</span><span class='line'> 	    touch stamp.h.in &amp;&amp; \
</span><span class='line'> 	    $(shell dpkg-buildflags --export=configure) sh configure \
</span><span class='line'> 	    --with-dovecot=../ \
</span><span class='line'><span class="gu">@@ -105,7 +105,7 @@</span>
</span><span class='line'> 	install -m644 debian/dovecot-core.ufw.profile debian/dovecot-core/etc/ufw/applications.d/dovecot-core
</span><span class='line'> 	install -D -m 0755 -o root -g root $(CURDIR)/debian/maildirmake.dovecot $(CURDIR)/debian/dovecot-core/usr/bin/maildirmake.dovecot
</span><span class='line'> 	mv $(CURDIR)/debian/dovecot-core/usr/share/doc/dovecot $(CURDIR)/debian/dovecot-core/usr/share/doc/dovecot-core
</span><span class='line'><span class="gd">-	cp $(PIGEONHOLE_DIR)/ChangeLog $(CURDIR)/debian/dovecot-core/usr/share/doc/dovecot-core/pigeonhole.ChangeLog</span>
</span><span class='line'><span class="gi">+	#cp $(PIGEONHOLE_DIR)/ChangeLog $(CURDIR)/debian/dovecot-core/usr/share/doc/dovecot-core/pigeonhole.ChangeLog</span>
</span><span class='line'> 	cp $(PIGEONHOLE_DIR)/README $(CURDIR)/debian/dovecot-core/usr/share/doc/dovecot-core/pigeonhole.README
</span><span class='line'> 	cp $(PIGEONHOLE_DIR)/NEWS $(CURDIR)/debian/dovecot-core/usr/share/doc/dovecot-core/pigeonhole.NEWS
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>
]]></content>
  </entry>
  
</feed>
