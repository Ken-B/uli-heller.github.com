<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Ubuntu | Was ich so treibe...]]></title>
  <link href="http://uli-heller.github.com/blog/categories/ubuntu/atom.xml" rel="self"/>
  <link href="http://uli-heller.github.com/"/>
  <updated>2013-08-07T10:00:49+02:00</updated>
  <id>http://uli-heller.github.com/</id>
  <author>
    <name><![CDATA[Uli Heller]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Subversion 1.8.1 für Ubuntu-12.04]]></title>
    <link href="http://uli-heller.github.com/blog/2013/07/27/subversion_1.8.1/"/>
    <updated>2013-07-27T10:00:00+02:00</updated>
    <id>http://uli-heller.github.com/blog/2013/07/27/subversion_1.8.1</id>
    <content type="html"><![CDATA[<p>Vor ein paar Tagen wurde Subversion-1.8.1 veröffentlicht.
Hier meine Versuche, ein Paket für Ubuntu-12.04 zu bauen.
Eingeflossen sind dabei auch die gescheiterten Versuche
mit Subversion-1.8.0. Schlußendlich kommt eine für mich funktionierende
Version von Subversion-1.8.1 heraus.</p>

<!-- more -->


<h2>Ausgangpunkt: Subversion-1.8.0</h2>

<p>Mein Ausgangspunkt sind meine kaputten Pakete für Subversion-1.8.0.</p>

<pre><code>$ cd subversion-1.8.0
$ uupdate -u ../subversion-1.8.1
$ cd ../subversion-1.8.1
</code></pre>

<p>Nun habe ich folgende Generierungs-Abhängigkeiten (build dependencies)
festgelegt:</p>

<ul>
<li>subversion: serf-1.2.1 und sqlite-3.7.15</li>
<li>serf: sqlite-3.7.15</li>
</ul>


<h2>Erste Hürde: Sqlite3-3.7.15</h2>

<p>Subversion benötigt eine relativ aktuelle Version von Sqlite3. Die
Standard-Version von Ubuntu-12.04 ist zu alt. Ich habe mir so beholfen:</p>

<ul>
<li>Quellpakete von sqlite3-3.7.15.2 aus &ldquo;raring&rdquo; runtergeladen</li>
<li>Ein paar kleine Anpassungen an debian/rules vorgenommen, damit
tcl85 an der richtigen Stelle ausgelesen wird</li>
<li>Pakete erzeugen mit <code>dpkg-buildpackage</code></li>
<li>Pakete installieren</li>
</ul>


<h2>Zweite Hürde: Serf-1.2.1</h2>

<ul>
<li>Diverse Umstellungen nötig, damit die Generierung durchläuft</li>
<li>Pakete erzeugen mit <code>dpkg-buildpackage</code></li>
<li>Pakete installieren</li>
</ul>


<h2>Subversion-1.8.1</h2>

<ul>
<li>Kann nun wie üblich mit <code>dpkg-buildpackage</code> erzeugt werden</li>
</ul>


<h2>Kurztests: Installation und Funktionsweise</h2>

<p>{% codeblock %}
$ sudo dpkg -i subversion_1.8.1-3dp12~precise1_amd64.deb libsvn1_1.8.1-3dp12~precise1_amd64.deb libserf1_1.2.1-0dp01~precise1_amd64.deb
$ sudo dpkg -i sqlite3_3.7.15.2-1dp01~precise1_amd64.deb libsqlite3-0_3.7.15.2-1dp01~precise1_amd64.deb
$ svn &mdash;version
svn, Version 1.8.1 (r1503906)
   übersetzt am Jul 26 2013, um 15:38:27 auf x86_64-pc-linux-gnu</p>

<p>Copyright &copy; 2013 The Apache Software Foundation.
Diese Software besteht aus Beiträgen vieler Personen;
siehe Datei NOTICE für weitere Informationen.
Subversion ist Open Source Software, siehe <a href="http://subversion.apache.org/">http://subversion.apache.org/</a></p>

<p>Die folgenden ZugriffsModule (ZM) für Projektarchive stehen zur Verfügung:</p>

<ul>
<li>ra_svn : Modul zum Zugriff auf ein Projektarchiv über das svn-Netzwerkprotokoll.

<ul>
<li>mit Cyrus-SASL-Authentifizierung</li>
<li>behandelt Schema »svn«</li>
</ul>
</li>
<li>ra_local : Modul zum Zugriff auf ein Projektarchiv auf der lokalen Festplatte

<ul>
<li>behandelt Schema »file«</li>
</ul>
</li>
<li>ra_serf : Modul zum Zugriff auf ein Projektarchiv über das Protokoll WebDAV mittels serf.

<ul>
<li>behandelt Schema »http«</li>
<li>behandelt Schema »https«
$ cd svn/my-project
$ svn status
svn: E155036: Please see the &lsquo;svn upgrade&rsquo; command
svn: E155036: The working copy at &lsquo;/home/uli/svn/my-project&rsquo;
is too old (format 29) to work with client version &lsquo;1.8.1 (r1503906)&rsquo; (expects format 31). You need to upgrade the working copy first.
$ svn upgrade
Upgraded &lsquo;.&rsquo;
$ svn status
$ svn update
Updating &lsquo;.&rsquo;:
A    minianwendungjsf/.classpath
A    minianwendungjsf/ant
A    minianwendungjsf/ant/build.xml
A    minianwendungjsf/.project
&hellip;
A    EJB3.1_Test/login.config
Updated to revision 13.
$ svn checkout <a href="https://.....">https://.....</a>
A    my-project2/git-test
A    my-project2/git-test/Hello.txt
A    my-project2/git-test/01-git-neu.txt
&hellip;
A    my-project2/testfolder2
A    my-project2/testfolder2/testbin-ticket9.odt
Checked out revision 78.
{% endcodeblock %}</li>
</ul>
</li>
</ul>


<p>Also: Grobtest ist OK.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[LXC: Probleme mit 3.10-er-Kernel -  Das Dateisystem ist nur lesbar]]></title>
    <link href="http://uli-heller.github.com/blog/2013/07/27/lxc-kernel-310/"/>
    <updated>2013-07-27T09:00:00+02:00</updated>
    <id>http://uli-heller.github.com/blog/2013/07/27/lxc-kernel-310</id>
    <content type="html"><![CDATA[<p>Seit einiger Zeit verwende ich LXC als Ergänzung zu VirtualBox.
Bislang läuft das weitgehend problemlos. Merkwürdigerweise
bekomme ich seit ein paar Tagen immer wieder Fehlermeldungen
bezüglich BTRFS: &ldquo;Das Dateisystem ist nur lesbar&rdquo;.</p>

<p>Erst dachte ich, BTRFS hätte &lsquo;nen Schuß. Detailliertere Tests zeigen,
dass der 3.10-er-Kernel wohl &ldquo;Schuld&rdquo; ist.</p>

<!-- more -->


<h2>Meine LXC-Umgebung</h2>

<ul>
<li>Ubuntu 12.04</li>
<li>3.8-er-Kernel oder auch 3.10-er-Kernel</li>
<li>/dev/mapper/datavg-lxlv ist eingebunden unter /lxc und ist ein
BTRFS-Dateisystem</li>
<li>Alle LXC-Container liegen unter /lxc, also auf einem BTRFS-Dateisystem</li>
</ul>


<h2>Runterfahren eines LXC-Containers unter 3.8</h2>

<p>Beim 3.8-er-Kernel sieht man eine Fehlermeldung bzgl.
meiner BTRFS-Partition: Sie kann <em>nicht</em> umgehängt werden mit
Nur-Lesen-Zugriff.</p>

<p>{% codeblock Runterfahren mit Kernel 3.8 lang:sh %}
~$ sudo poweroff
&hellip;
umount: /run/lock: not mounted
umount: /run/shm: not mounted
mount: cannot mount block device /dev/mapper/datavg-lxclv read-only
 * Will now halt
~$ sudo touch  /lxc/x
~$ sudo rm  /lxc/x
{% endcodeblock %}</p>

<h2>Runterfahren eines LXC-Containers unter 3.10</h2>

<p>Beim 3.10-er-Kernel sieht man keine Fehlermeldung bzgl.
meiner BTRFS-Partition, also kann sie vermutlich umgehängt werden mit
Nur-Lesen-Zugriff. Dementsprechend ist sie danach &ldquo;nur-lesend&rdquo;
eingehängt und der Inhalt von /lxc kann nicht mehr modifiziert
werden.</p>

<p>{% codeblock Runterfahren mit Kernel 3.10 lang:sh %}
~$ sudo poweroff
&hellip;
umount: /run/lock: not mounted
umount: /run/shm: not mounted
 * Will now halt
~$ sudo touch /lxc/x
touch: »/lxc/x“ kann nicht berührt werden: Das Dateisystem ist nur lesbar
~$ LANG=C sudo touch /lxc/x
touch: cannot touch `/lxc/x': Read-only file system
{% endcodeblock %}</p>

<h2>Dateisysteme innerhalb der LXC-Container</h2>

<p>{% codeblock Dateisysteme lang:sh %}
container~$ df
Filesystem               1K-blocks     Used Available Use% Mounted on
/dev/mapper/datavg-lxclv  41943040 13871816  26684544  35% /
none                        816864       76    816788   1% /run
none                          5120        0      5120   0% /run/lock
none                       4084308        0   4084308   0% /run/shm
{% endcodeblock %}</p>

<h2>Korrekturen</h2>

<ul>
<li>Bei Verwendung des 3.10-er-Kernels nach dem Stoppen eines Containers: <code>sudo mount -o remount,rw /dev/mapper/datavg-lxclv</code> ausführen</li>
<li>Immer nur den 3.8-er-Kernel verwenden</li>
<li>Innerhalb des Containers /etc/init.d/umountroot &ldquo;abklemmen&rdquo;:
<code>sudo update-rc.d -f umountroot remove</code></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[LXC: Probleme bei der Initialisierung des Netzwerkes]]></title>
    <link href="http://uli-heller.github.com/blog/2013/07/26/lxc-networking/"/>
    <updated>2013-07-26T15:00:00+02:00</updated>
    <id>http://uli-heller.github.com/blog/2013/07/26/lxc-networking</id>
    <content type="html"><![CDATA[<p>Seit einiger Zeit verwende ich LXC als Ergänzung zu VirtualBox.
Bislang läuft das weitgehend problemlos.
Merkwürdigerweise habe einige LXC-Container seit heute ein
Problem beim Start: Es dauert endlos, bis der Login-Prompt erscheint
und das Netzwerk funktioniert nicht. Betroffen sind auch Container,
die früher anstandslos gelaufen sind.</p>

<!-- more -->


<h2>Logs</h2>

<h3>Host: /var/Log/syslog</h3>

<p>{% codeblock Host:/var/log/syslog %}
Jul 26 13:12:53 uli-hp-ssd dnsmasq-dhcp[1571]: DHCPDISCOVER(lxcbr0) 00:16:3e:84:7a:82
Jul 26 13:12:53 uli-hp-ssd dnsmasq-dhcp[1571]: DHCPOFFER(lxcbr0) 10.0.3.14 00:16:3e:84:7a:82
Jul 26 13:13:13 uli-hp-ssd dnsmasq-dhcp[1571]: DHCPDISCOVER(lxcbr0) 00:16:3e:84:7a:82
Jul 26 13:13:13 uli-hp-ssd dnsmasq-dhcp[1571]: DHCPOFFER(lxcbr0) 10.0.3.14 00:16:3e:84:7a:82
Jul 26 13:13:24 uli-hp-ssd dnsmasq-dhcp[1571]: DHCPDISCOVER(lxcbr0) 00:16:3e:84:7a:82
Jul 26 13:13:24 uli-hp-ssd dnsmasq-dhcp[1571]: DHCPOFFER(lxcbr0) 10.0.3.14 00:16:3e:84:7a:82
Jul 26 13:13:35 uli-hp-ssd dnsmasq-dhcp[1571]: DHCPDISCOVER(lxcbr0) 00:16:3e:84:7a:82
Jul 26 13:13:35 uli-hp-ssd dnsmasq-dhcp[1571]: DHCPOFFER(lxcbr0) 10.0.3.14 00:16:3e:84:7a:82
Jul 26 13:13:53 uli-hp-ssd dnsmasq-dhcp[1571]: DHCPDISCOVER(lxcbr0) 00:16:3e:84:7a:82
{% endcodeblock %}</p>

<h3>Container: /var/log/syslog</h3>

<p>{% codeblock Container:/var/log/syslog %}
Jul 26 11:12:53 localhost dhclient: DHCPDISCOVER on eth0 to 255.255.255.255 port 67 interval 17
Jul 26 11:12:53 localhost dhclient: 5 bad udp checksums in 5 packets
Jul 26 11:13:10 localhost dhclient: DHCPDISCOVER on eth0 to 255.255.255.255 port 67 interval 14
Jul 26 11:13:24 localhost dhclient: DHCPDISCOVER on eth0 to 255.255.255.255 port 67 interval 11
Jul 26 11:13:35 localhost dhclient: DHCPDISCOVER on eth0 to 255.255.255.255 port 67 interval 15
Jul 26 11:13:50 localhost dhclient: DHCPDISCOVER on eth0 to 255.255.255.255 port 67 interval 11
Jul 26 11:14:01 localhost dhclient: DHCPDISCOVER on eth0 to 255.255.255.255 port 67 interval 10
Jul 26 11:14:01 localhost dhclient: 5 bad udp checksums in 5 packets
Jul 26 11:14:11 localhost dhclient: DHCPDISCOVER on eth0 to 255.255.255.255 port 67 interval 15
Jul 26 11:14:26 localhost dhclient: DHCPDISCOVER on eth0 to 255.255.255.255 port
{% endcodeblock %}</p>

<h2>Abhilfe</h2>

<h3>Temporäre Abhilfe</h3>

<p>Abhilfe schafft die Ausführung vom nachfolgenden Befehl auf dem Host:</p>

<p><code>
sudo iptables -A POSTROUTING -t mangle -p udp --dport bootpc -j CHECKSUM --checksum-fill
</code></p>

<p>Die Abhilfe ist hier beschrieben: <a href="https://bugs.launchpad.net/ubuntu/+source/isc-dhcp/+bug/930962/comments/14">https://bugs.launchpad.net/ubuntu/+source/isc-dhcp/+bug/930962/comments/14</a></p>

<h3>Dauerhafte Abhilfe</h3>

<p>Eine dauerhafte Abhilfe schafft die Aktualisierung des Paketes
&ldquo;isc-dhcp-client&rdquo; auf Version 4.1.ESV-R4-0ubuntu5.8 oder neuer.
Das geht ganz normal mit <code>apt-get update; apt-get upgrade</code>.
Ich hatte zuvor 4.1.ESV-R4-0ubuntu5.5 im Container.</p>

<h2>Nachtrag: Ursache</h2>

<p>Das Problem wurde ziemlich sicher verursacht durch den Einsatz von
einem 3.10-er Kernel auf dem Host. Nach dem &ldquo;Runterschalten&rdquo; auf 3.8
laufen die Container auch wieder ohne Aktualisierung von
&ldquo;isc-dhcp-client&rdquo;.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Git Fork]]></title>
    <link href="http://uli-heller.github.com/blog/2013/07/21/git-fork/"/>
    <updated>2013-07-21T09:00:00+02:00</updated>
    <id>http://uli-heller.github.com/blog/2013/07/21/git-fork</id>
    <content type="html"><![CDATA[<h1>Git Fork</h1>

<p>Hier kurz meine Notizen zum Arbeiten mit GitHub Forks:</p>

<ul>
<li>Bestehendes Projekt &ldquo;forken&rdquo; &ndash;> einfach via GitHub-Webseite</li>
<li>Lokalen Clone hiervon anlegen: <code>git clone ...</code></li>
<li>Lokale Änderungen an GitHub schicken:
<code>git push origin master</code></li>
<li>Original-Projekt als &ldquo;upstream&rdquo; definieren:
<code>git remote add upstream ...</code></li>
<li>Lokale Kopie des Original-Projektes aktualisieren:
<code>git fetch upstream</code></li>
<li>Lokale Kopie des Original-Projektes &ldquo;einarbeiten&rdquo;:

<ul>
<li><code>git merge --no-commit upstream/master</code></li>
<li><code>git mergetool</code></li>
<li><code>git commit -m ...</code></li>
</ul>
</li>
</ul>


<p>Mehr Details: <a href="https://help.github.com/articles/fork-a-repo">https://help.github.com/articles/fork-a-repo</a>.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Octopress - Liquid error: can’t convert nil into String]]></title>
    <link href="http://uli-heller.github.com/blog/2013/07/20/octopress-fehler/"/>
    <updated>2013-07-20T07:00:00+02:00</updated>
    <id>http://uli-heller.github.com/blog/2013/07/20/octopress-fehler</id>
    <content type="html"><![CDATA[<p>Beim Einbinden von Dateien in einen Octopress-Blog-Eintrag sehe ich immer mal wieder
Fehlermeldungen wie diese:</p>

<pre><code>Liquid error: can’t convert nil into String
</code></pre>

<p>Sie tauchen immer dann auf, wenn ich Dateien ohne Extension mittels <code>include_code</code>
einbinde:</p>

<pre><code>{{ "{% include_code redmine/passenger/passenger" }} %}
</code></pre>

<!-- more -->


<h2>Einige Tests</h2>

<h3>Wie sieht&rsquo;s mit der Version von Github/master aus?</h3>

<p>{% codeblock lang:sh %}
$ git clone <a href="https://github.com/imathis/octopress.git">https://github.com/imathis/octopress.git</a>
Klone nach &lsquo;octopress&rsquo;&hellip;
remote: Counting objects: 10661, done.
remote: Compressing objects: 100% (4588/4588), done.
remote: Total 10661 (delta 5839), reused 9830 (delta 5212)
Empfange Objekte: 100% (10661/10661), 2.30 MiB | 773.00 KiB/s, done.
Löse Unterschiede auf: 100% (5839/5839), done.
Checking connectivity&hellip; done</p>

<p>$ cd octopress/
You are using &lsquo;.rvmrc&rsquo;, it requires trusting, it is slower and it is not compatible with other ruby managers,
you can switch to &lsquo;.ruby-version&rsquo; using &lsquo;rvm rvmrc to [.]ruby-version&rsquo;
or ignore this warnings with &lsquo;rvm rvmrc warning ignore &hellip;/octopress/.rvmrc&rsquo;,
&lsquo;.rvmrc&rsquo; will continue to be the default project file in RVM 1 and RVM 2,
to ignore the warning for all files run &lsquo;rvm rvmrc warning ignore all.rvmrcs&rsquo;.</p>

<hr />

<ul>
<li>NOTICE                                                                       *</li>
</ul>


<hr />

<ul>
<li>RVM has encountered a new or modified .rvmrc file in the current directory,  *</li>
<li>this is a shell script and therefore may contain any shell commands.         *</li>
<li><pre><code>                                                                       *
</code></pre></li>
<li>Examine the contents of this file carefully to be sure the contents are      *</li>
<li>safe before trusting it!                                                     *</li>
<li>Do you wish to trust &lsquo;&hellip;/octopress/.rvmrc&rsquo;?                                 *</li>
<li>Choose v[iew] below to view the contents                                     *</li>
</ul>


<hr />

<p>y[es], n[o], v[iew], c[ancel]> yes
Using &hellip;/.rvm/gems/ruby-1.9.3-p392</p>

<p>$ bundle install
Fetching gem metadata from <a href="https://rubygems.org/........">https://rubygems.org/........</a>
Fetching gem metadata from <a href="https://rubygems.org/..">https://rubygems.org/..</a>
Resolving dependencies&hellip;
Using rake (0.9.2.2)
Using RedCloth (4.2.9)
Using chunky_png (1.2.5)
Using fast-stemmer (1.0.1)
Using classifier (1.3.3)
Using fssm (0.2.9)
Installing sass (3.2.9)
Installing compass (0.12.2)
Using directory_watcher (1.4.1)
Installing haml (3.1.7)
Installing kramdown (0.13.8)
Using liquid (2.3.0)
Using syntax (1.0.0)
Installing maruku (0.6.1)
Using posix-spawn (0.3.6)
Installing yajl-ruby (1.1.0)
Installing pygments.rb (0.3.4)
Installing jekyll (0.12.0)
Installing rack (1.5.2)
Installing rack-protection (1.5.0)
Using rb-fsevent (0.9.1)
Installing rdiscount (2.0.7.3)
Using rubypants (0.2.0)
Installing sass-globbing (1.0.0)
Installing tilt (1.3.7)
Installing sinatra (1.4.2)
Using stringex (1.4.0)
Using bundler (1.3.5)
Your bundle is complete!
Use <code>bundle show [gemname]</code> to see where a bundled gem is installed.</p>

<p>$ rake install</p>

<h2>Copying classic theme into ./source and ./sass</h2>

<p>mkdir -p source
cp -r .themes/classic/source/. source
mkdir -p sass
cp -r .themes/classic/sass/. sass
mkdir -p source/_posts
mkdir -p public</p>

<p>$ rake generate</p>

<h2>Generating Site with Jekyll</h2>

<p>directory source/stylesheets/
   create source/stylesheets/screen.css
Configuration from &hellip;/octopress/_config.yml
Building site: source &ndash;> public
Successfully generated site: source &ndash;> public</p>

<p>$ mkdir -p source/downloads/code</p>

<p>$ echo &ldquo;Uli war da&rdquo; >source/downloads/code/mytest</p>

<p>$ mkdir -p source/downloads/code/redmine/passenger</p>

<p>$ cp &hellip;/source/downloads/code/redmine/passenger/passenger source/downloads/code/redmine/passenger/.</p>

<p>{% endcodeblock %}</p>

<p>Jetzt noch ein Testdokument anlegen:</p>

<h2>{% codeblock &hellip;/source/_posts/2013-07-20-octopress.md lang:text %}</h2>

<p>layout: post
author: Uli Heller
published: yes
title: &ldquo;Octopress-Test&rdquo;
date: 2013-07-20 07:00</p>

<h2>comments: true</h2>

<p>Test:</p>

<p>{{ &ldquo;{% include_code mytest&rdquo; }} %}</p>

<p>Test2:</p>

<p>{{ &ldquo;{% include_code redmine/passenger/passenger&rdquo; }} %}
{% endcodeblock %}</p>

<p>Sichten mit</p>

<ul>
<li><code>rake preview</code></li>
<li>Browser: <a href="http://localhost:4000">http://localhost:4000</a></li>
</ul>


<p>Sieht absolut OK aus, der Fehler tritt nicht auf!</p>

<h3>Wie sieht&rsquo;s mit der Version von Github/site-2.1 aus?</h3>

<p>Mit der Version von Github/site-2.1 tritt der Fehler genauso auf wie bei mir.
Er ist dort also nicht korrigiert.</p>

<h3>Wie sieht&rsquo;s mit der Version von Github/3.0 aus?</h3>

<p>Scheint komplett andersartig zu funktionieren &ndash; komme damit momentan nicht klar.</p>

<h3>Wie sieht&rsquo;s mit der Version von Github/source-2.1 aus?</h3>

<p>Der Zweig &ldquo;source-2.1&rdquo; existiert auf Github nicht mehr!</p>

<h2>Weiteres Vorgehen</h2>

<p>Für mich sieht&rsquo;s so aus, als wäre das Aufsetzen auf &ldquo;source-2.1&rdquo; eine echt blöde
Entscheidung gewesen. Werde mein Octopress wohl in nächster Zeit umstellen müssen
auf &ldquo;master&rdquo;.</p>
]]></content>
  </entry>
  
</feed>
