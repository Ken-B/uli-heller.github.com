<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Linux | Was ich so treibe...]]></title>
  <link href="http://uli-heller.github.com/blog/categories/linux/atom.xml" rel="self"/>
  <link href="http://uli-heller.github.com/"/>
  <updated>2013-08-07T10:00:49+02:00</updated>
  <id>http://uli-heller.github.com/</id>
  <author>
    <name><![CDATA[Uli Heller]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Octopress und Git ohne Umbenennung]]></title>
    <link href="http://uli-heller.github.com/blog/2013/08/05/octopress-git/"/>
    <updated>2013-08-05T08:00:00+02:00</updated>
    <id>http://uli-heller.github.com/blog/2013/08/05/octopress-git</id>
    <content type="html"><![CDATA[<p>Octopress hat die Eigenart, bei Verwendung von Git als &ldquo;Deployment-Methode&rdquo;
die Zweige umzubenennen:</p>

<ul>
<li>Umbenennung: origin &ndash;> octopress</li>
<li>Neuanlage:   origin &lt;&ndash; repo_url</li>
<li>Umbenennung: master &ndash;> source</li>
<li>etc.</li>
</ul>


<p>Die ganze Umbenennerei gefällt mir garnicht. Ich mag&rsquo;s so:</p>

<ul>
<li>uli-octopress: Das ist mein &ldquo;normales&rdquo; GitHub-Repository, in dem ich alle
Quelltexte meiner Octopress-Installation halte</li>
<li>uli-heller.github.com: Das ist das GitHub-Repository, in dem ich die
generierten HTML-Seiten veröffentliche</li>
</ul>


<!-- more -->


<h2>uli-octopress</h2>

<p>Hierbei gibt es keine Besonderheiten. Einfach das Repository in GitHub
anlegen und klonen wie üblich.</p>

<h2>uli-heller.github.com</h2>

<p>Am besten erstmal einfach leer anlegen mit einem Branch namens &ldquo;master&rdquo;.</p>

<h2>Deployment-Methode konfigurieren</h2>

<h3>_deploy</h3>

<p>{% codeblock Verzeichnis _deploy lang:sh %}
$ cd uli-octopress</p>

<p>uli-octopress$ git clone git@github.com:uli-heller/uli-heller.github.com.git
Klone nach &lsquo;uli-heller.github.com&rsquo;&hellip;
remote: Counting objects: 14438, done.
remote: Compressing objects: 100% (3999/3999), done.
remote: Total 14438 (delta 7274), reused 13662 (delta 6502)
Empfange Objekte: 100% (14438/14438), 16.14 MiB | 218.00 KiB/s, done.
Löse Unterschiede auf: 100% (7274/7274), done.
Checking connectivity&hellip; done</p>

<p>uli-octopress$ mv uli-heller.github.com _deploy
{% endcodeblock %}</p>

<h3>Rakefile</h3>

<p>Nun noch Anpassungen an Rakefile:</p>

<p>{% codeblock Anpassungen am Rakefile lang:diff %}
diff &mdash;git a/Rakefile b/Rakefile
index f3ada93..321c3c5 100644
&mdash;&ndash; a/Rakefile
+++ b/Rakefile
@@ -9,10 +9,10 @@ ssh_port       = &ldquo;22&rdquo;
 document_root  = &ldquo;~/website.com/&rdquo;
 rsync_delete   = false
 rsync_args     = &ldquo;&rdquo;  # Any extra arguments to pass to rsync
-deploy_default = &ldquo;rsync&rdquo;
+deploy_default = &ldquo;push&rdquo;</p>

<p> # This will be configured for you when you run config_deploy
-deploy_branch  = &ldquo;gh-pages&rdquo;
+deploy_branch  = &ldquo;master&rdquo;</p>

<p> ## &mdash; Misc Configs &mdash; ##
{% endcodeblock %}</p>

<h2>Test</h2>

<p>{% codeblock Test lang:sh %}
uli-octopress$ rake generate</p>

<h2>Generating Site with Jekyll</h2>

<p>identical source/stylesheets/screen.css
Configuration from /home/uli/git/octopress/_config.yml
Building site: source &ndash;> public
&hellip;
Successfully generated site: source &ndash;> public</p>

<p>uli-octopress$ rake preview
Starting to watch source with Jekyll and Compass. Starting Rack on port 4000
[2013-08-05 07:55:34] INFO  WEBrick 1.3.1
&hellip;</p>

<p>uli-octopress$ rake deploy</p>

<h2>Generating Site with Jekyll</h2>

<p>identical source/stylesheets/screen.css
Configuration from /home/uli/git/octopress/_config.yml
Building site: source &ndash;> public
&hellip;</p>

<h2>Pushing generated _deploy website</h2>

<p>Counting objects: 710, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (275/275), done.
Writing objects: 100% (382/382), 95.23 KiB | 0 bytes/s, done.
Total 382 (delta 194), reused 0 (delta 0)
To git@github.com:uli-heller/uli-heller.github.com.git
   4d99436..e7770a8  master &ndash;> master</p>

<h2>Github Pages deploy complete</h2>

<p>cd &ndash;
{% endcodeblock %}</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Fotogallerie für Octopress]]></title>
    <link href="http://uli-heller.github.com/blog/2013/08/04/gallery/"/>
    <updated>2013-08-04T10:00:00+02:00</updated>
    <id>http://uli-heller.github.com/blog/2013/08/04/gallery</id>
    <content type="html"><![CDATA[<p>Zur Illustration der CentOS-Installation benötige ich eine Fotogallerie in
meiner Octopress-Installation. In diesem Artikel beschreibe ich das
Vorgehen.</p>

<!-- more -->


<h2>Neues Plugin: octopress-gallery</h2>

<p>Ich verwende das Plugin <a href="https://github.com/yortz/octopress_gallery">Octopress-Gallery</a>
zur Anzeige der Fotogallerie.</p>

<h3>Vorbereitungen</h3>

<p>Pfad zur Octopress-Installation: <code>OP=/home/UliHeller/octopress</code></p>

<h3>Grundinstallation</h3>

<ul>
<li>Auschecken: <code>git clone https://github.com/yortz/octopress_gallery.git</code></li>
<li>Kopieren

<ul>
<li><code>cp octopress_gallery/plugins/gallery_tag.rb "${OP}/plugins/."</code></li>
<li><code>cp octopress_gallery/plugins/mini_magick.rb "${OP}/plugins/."</code></li>
</ul>
</li>
<li>Erweitern von &ldquo;${OP}/Gemfile&rdquo;: Neue Zeile <code>gem 'mini_magick'</code></li>
<li>Installieren der Zusatz-Gems: <code>cd "${OP}"; bundle install</code></li>
</ul>


<h3>Bilder ablegen</h3>

<ul>
<li><code>mkdir "${OP}/sources/images/galleries"</code></li>
<li><code>mkdir "${OP}/sources/images/galleries/test"</code></li>
<li><code>cp *.jpg "${OP}/sources/images/galleries/test"</code></li>
</ul>


<h3>Gallerie konfigurieren</h3>

<h4>_config.yml</h4>

<p>{% codeblock %}
mini_magick:</p>

<pre><code>test_thumbnail:
  source: images/galleries/test
  destination: images/galleries/test/thumbs
  commands:
    - thumbnail: "64x48^"
    - crop: "64x48-0x0"
</code></pre>

<p>{% endcodeblock %}</p>

<h4>Gallerie in Artikel &ldquo;anziehen&rdquo;</h4>

<p>Diese Zeile muß in einem Artikel auftauchen:</p>

<pre>
{{ "{{ 'test' | image_list" }} }}
</pre>


<h2>Hübschere Präsentation mit Fotorama</h2>

<p>Die Präsentation der Gallerie ist in der Grundversion sehr schlicht.
Durch die Verwendung von <a href="http://fotorama.io/">Fotorama</a> wird das deutlich
hübscher.</p>

<h3>JQuery und Fotorama runterladen und ablegen</h3>

<ul>
<li><code>mkdir ${OP}/source/javascripts/fotorama</code></li>
<li><code>wget http://code.jquery.com/jquery-1.10.2.min.js</code></li>
<li><code>mv jquery-1.10.2.min.js ${OP}/source/javascripts/fotorama/.</code></li>
</ul>


<h3>Fotorama runterladen und ablegen</h3>

<ul>
<li><code>wget http://fotorama.s3.amazonaws.com/4.2.3/fotorama-4.2.3.zip</code></li>
<li><code>mv fotorama-4.2.3.zip fotorama-4.2.3.zip.gz</code></li>
<li><code>gzip -d fotorama-4.2.3.zip.gz</code></li>
<li><code>unzip -d tmp fotorama-4.2.3.zip</code></li>
<li><code>mv tmp/fotorama-4.2.3/foto* ${OP}/source/javascripts/fotorama/.</code></li>
<li><code>rm -rf tmp</code></li>
</ul>


<h3>Anpassungen an plugins/gallery_tag.rb</h3>

<p>{% codeblock Anpassungen an plugins/gallery_tag.rb lang:diff %}
diff &mdash;git a/plugins/gallery_tag.rb b/plugins/gallery_tag.rb
index 6dc0c14..b2d8037 100644
&mdash;&ndash; a/plugins/gallery_tag.rb
+++ b/plugins/gallery_tag.rb
@@ -4,14 +4,20 @@ module ImageList
   def image_list( name )</p>

<pre><code>unless name == nil
 list = Array.new
</code></pre>

<ul>
<li> list &lt;&lt; %Q{<script src="http://uli-heller.github.com/javascripts/fotorama/jquery-1.10.2.min.js"></script>}</li>
<li> list &lt;&lt; %Q{<link href="http://uli-heller.github.com/javascripts/fotorama/fotorama.css" rel="stylesheet">}</li>
<li> list &lt;&lt; %Q{<script src="http://uli-heller.github.com/javascripts/fotorama/fotorama.js"></script>}</li>
<li> list &lt;&lt; %Q{&lt;div class=&ldquo;fotorama&rdquo; data-autoplay=&ldquo;3000&rdquo; data-transition=&ldquo;dissolve&rdquo; data-nav=&ldquo;thumbs&rdquo; data-allow-full-screen=&ldquo;true&rdquo; data-keyboard=&ldquo;true&rdquo; data-w
 dir = Dir.new( File.join(BASE_DIR, name) )</li>
<li> dir.each do | d |</li>
<li> dir.sort.each do | d |
   image = File.basename(d, File.extname(d))
   unless d =~ /^./ || d =~ /thumbs/</li>
<li><pre><code> list &lt;&lt; %Q{&lt;a href="http://uli-heller.github.com/images/galleries/#{name}/#{d}" rel="shadowbox" title="#{image}"&gt;&lt;img src="http://uli-heller.github.com/images/galleries/#{name}/thumbs/#{d}" /&gt;&lt;/a&gt;}
</code></pre>

<p>+#        list &lt;&lt; %Q{<a href="http://uli-heller.github.com/images/galleries/#{name}/#{d}" rel="shadowbox" title="#{image}"><img src="http://uli-heller.github.com/images/galleries/#{name}/thumbs/#{d}" /></a>}</p></li>
<li><pre><code> list &lt;&lt; %Q{&lt;a href="http://uli-heller.github.com/images/galleries/#{name}/#{d}"&gt;&lt;img src="http://uli-heller.github.com/images/galleries/#{name}/thumbs/#{d}"/&gt;&lt;/a&gt;}
</code></pre>

<p>   end
 end</p></li>
<li> list.sort.join( &ldquo;\n&rdquo; )</li>
<li> list &lt;&lt; %Q{</div> <!--class="fotorama" data-nav="thumbs" -->}
+#    list.sort.join( &ldquo;\n&rdquo; )
end
end
end
{% endcodeblock %}</li>
</ul>


<h2>Probleme</h2>

<h3>Liquid Exception: no implicit conversion of nil into String in atom.xml</h3>

<p>Die Ausführung von <code>rake generate</code> bricht ab mit einer Fehlermeldung:</p>

<p>{% codeblock %}
$ rake generate</p>

<h2>Generating Site with Jekyll</h2>

<p>unchanged sass/print.scss
identical source/stylesheets/screen.css
Configuration from &hellip;/dp-octopress/_config.yml
Building site: source &ndash;> public
Liquid Exception: no implicit conversion of nil into String in atom.xml
&hellip;/dp-octopress/plugins/gallery_tag.rb:10:in <code>join'
.../dp-octopress/plugins/gallery_tag.rb:10:in</code>image_list'
&hellip;
{% endcodeblock %}</p>

<p>Abhilfe: Anpassungen an plugins/gallery_tag.rb vornehmen:</p>

<p>{% codeblock Anpassungen an plugins/gallery_tag.rb lang:diff %}
diff &mdash;git a/plugins/gallery_tag.rb b/plugins/gallery_tag.rb
index f895040..6dc0c14 100644
&mdash;&ndash; a/plugins/gallery_tag.rb
+++ b/plugins/gallery_tag.rb
@@ -2,6 +2,7 @@ BASE_DIR = &lsquo;source/images/galleries&rsquo;</p>

<p> module ImageList
   def image_list( name )
+   unless name == nil</p>

<pre><code> list = Array.new
 dir = Dir.new( File.join(BASE_DIR, name) )
 dir.each do | d |
</code></pre>

<p>@@ -11,6 +12,7 @@ module ImageList</p>

<pre><code>   end
 end
 list.sort.join( "\n" )
</code></pre>

<ul>
<li>end
end
end
{% endcodeblock %}</li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Subversion 1.8.1 für Ubuntu-12.04]]></title>
    <link href="http://uli-heller.github.com/blog/2013/07/27/subversion_1.8.1/"/>
    <updated>2013-07-27T10:00:00+02:00</updated>
    <id>http://uli-heller.github.com/blog/2013/07/27/subversion_1.8.1</id>
    <content type="html"><![CDATA[<p>Vor ein paar Tagen wurde Subversion-1.8.1 veröffentlicht.
Hier meine Versuche, ein Paket für Ubuntu-12.04 zu bauen.
Eingeflossen sind dabei auch die gescheiterten Versuche
mit Subversion-1.8.0. Schlußendlich kommt eine für mich funktionierende
Version von Subversion-1.8.1 heraus.</p>

<!-- more -->


<h2>Ausgangpunkt: Subversion-1.8.0</h2>

<p>Mein Ausgangspunkt sind meine kaputten Pakete für Subversion-1.8.0.</p>

<pre><code>$ cd subversion-1.8.0
$ uupdate -u ../subversion-1.8.1
$ cd ../subversion-1.8.1
</code></pre>

<p>Nun habe ich folgende Generierungs-Abhängigkeiten (build dependencies)
festgelegt:</p>

<ul>
<li>subversion: serf-1.2.1 und sqlite-3.7.15</li>
<li>serf: sqlite-3.7.15</li>
</ul>


<h2>Erste Hürde: Sqlite3-3.7.15</h2>

<p>Subversion benötigt eine relativ aktuelle Version von Sqlite3. Die
Standard-Version von Ubuntu-12.04 ist zu alt. Ich habe mir so beholfen:</p>

<ul>
<li>Quellpakete von sqlite3-3.7.15.2 aus &ldquo;raring&rdquo; runtergeladen</li>
<li>Ein paar kleine Anpassungen an debian/rules vorgenommen, damit
tcl85 an der richtigen Stelle ausgelesen wird</li>
<li>Pakete erzeugen mit <code>dpkg-buildpackage</code></li>
<li>Pakete installieren</li>
</ul>


<h2>Zweite Hürde: Serf-1.2.1</h2>

<ul>
<li>Diverse Umstellungen nötig, damit die Generierung durchläuft</li>
<li>Pakete erzeugen mit <code>dpkg-buildpackage</code></li>
<li>Pakete installieren</li>
</ul>


<h2>Subversion-1.8.1</h2>

<ul>
<li>Kann nun wie üblich mit <code>dpkg-buildpackage</code> erzeugt werden</li>
</ul>


<h2>Kurztests: Installation und Funktionsweise</h2>

<p>{% codeblock %}
$ sudo dpkg -i subversion_1.8.1-3dp12~precise1_amd64.deb libsvn1_1.8.1-3dp12~precise1_amd64.deb libserf1_1.2.1-0dp01~precise1_amd64.deb
$ sudo dpkg -i sqlite3_3.7.15.2-1dp01~precise1_amd64.deb libsqlite3-0_3.7.15.2-1dp01~precise1_amd64.deb
$ svn &mdash;version
svn, Version 1.8.1 (r1503906)
   übersetzt am Jul 26 2013, um 15:38:27 auf x86_64-pc-linux-gnu</p>

<p>Copyright &copy; 2013 The Apache Software Foundation.
Diese Software besteht aus Beiträgen vieler Personen;
siehe Datei NOTICE für weitere Informationen.
Subversion ist Open Source Software, siehe <a href="http://subversion.apache.org/">http://subversion.apache.org/</a></p>

<p>Die folgenden ZugriffsModule (ZM) für Projektarchive stehen zur Verfügung:</p>

<ul>
<li>ra_svn : Modul zum Zugriff auf ein Projektarchiv über das svn-Netzwerkprotokoll.

<ul>
<li>mit Cyrus-SASL-Authentifizierung</li>
<li>behandelt Schema »svn«</li>
</ul>
</li>
<li>ra_local : Modul zum Zugriff auf ein Projektarchiv auf der lokalen Festplatte

<ul>
<li>behandelt Schema »file«</li>
</ul>
</li>
<li>ra_serf : Modul zum Zugriff auf ein Projektarchiv über das Protokoll WebDAV mittels serf.

<ul>
<li>behandelt Schema »http«</li>
<li>behandelt Schema »https«
$ cd svn/my-project
$ svn status
svn: E155036: Please see the &lsquo;svn upgrade&rsquo; command
svn: E155036: The working copy at &lsquo;/home/uli/svn/my-project&rsquo;
is too old (format 29) to work with client version &lsquo;1.8.1 (r1503906)&rsquo; (expects format 31). You need to upgrade the working copy first.
$ svn upgrade
Upgraded &lsquo;.&rsquo;
$ svn status
$ svn update
Updating &lsquo;.&rsquo;:
A    minianwendungjsf/.classpath
A    minianwendungjsf/ant
A    minianwendungjsf/ant/build.xml
A    minianwendungjsf/.project
&hellip;
A    EJB3.1_Test/login.config
Updated to revision 13.
$ svn checkout <a href="https://.....">https://.....</a>
A    my-project2/git-test
A    my-project2/git-test/Hello.txt
A    my-project2/git-test/01-git-neu.txt
&hellip;
A    my-project2/testfolder2
A    my-project2/testfolder2/testbin-ticket9.odt
Checked out revision 78.
{% endcodeblock %}</li>
</ul>
</li>
</ul>


<p>Also: Grobtest ist OK.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[LXC: Probleme mit 3.10-er-Kernel -  Das Dateisystem ist nur lesbar]]></title>
    <link href="http://uli-heller.github.com/blog/2013/07/27/lxc-kernel-310/"/>
    <updated>2013-07-27T09:00:00+02:00</updated>
    <id>http://uli-heller.github.com/blog/2013/07/27/lxc-kernel-310</id>
    <content type="html"><![CDATA[<p>Seit einiger Zeit verwende ich LXC als Ergänzung zu VirtualBox.
Bislang läuft das weitgehend problemlos. Merkwürdigerweise
bekomme ich seit ein paar Tagen immer wieder Fehlermeldungen
bezüglich BTRFS: &ldquo;Das Dateisystem ist nur lesbar&rdquo;.</p>

<p>Erst dachte ich, BTRFS hätte &lsquo;nen Schuß. Detailliertere Tests zeigen,
dass der 3.10-er-Kernel wohl &ldquo;Schuld&rdquo; ist.</p>

<!-- more -->


<h2>Meine LXC-Umgebung</h2>

<ul>
<li>Ubuntu 12.04</li>
<li>3.8-er-Kernel oder auch 3.10-er-Kernel</li>
<li>/dev/mapper/datavg-lxlv ist eingebunden unter /lxc und ist ein
BTRFS-Dateisystem</li>
<li>Alle LXC-Container liegen unter /lxc, also auf einem BTRFS-Dateisystem</li>
</ul>


<h2>Runterfahren eines LXC-Containers unter 3.8</h2>

<p>Beim 3.8-er-Kernel sieht man eine Fehlermeldung bzgl.
meiner BTRFS-Partition: Sie kann <em>nicht</em> umgehängt werden mit
Nur-Lesen-Zugriff.</p>

<p>{% codeblock Runterfahren mit Kernel 3.8 lang:sh %}
~$ sudo poweroff
&hellip;
umount: /run/lock: not mounted
umount: /run/shm: not mounted
mount: cannot mount block device /dev/mapper/datavg-lxclv read-only
 * Will now halt
~$ sudo touch  /lxc/x
~$ sudo rm  /lxc/x
{% endcodeblock %}</p>

<h2>Runterfahren eines LXC-Containers unter 3.10</h2>

<p>Beim 3.10-er-Kernel sieht man keine Fehlermeldung bzgl.
meiner BTRFS-Partition, also kann sie vermutlich umgehängt werden mit
Nur-Lesen-Zugriff. Dementsprechend ist sie danach &ldquo;nur-lesend&rdquo;
eingehängt und der Inhalt von /lxc kann nicht mehr modifiziert
werden.</p>

<p>{% codeblock Runterfahren mit Kernel 3.10 lang:sh %}
~$ sudo poweroff
&hellip;
umount: /run/lock: not mounted
umount: /run/shm: not mounted
 * Will now halt
~$ sudo touch /lxc/x
touch: »/lxc/x“ kann nicht berührt werden: Das Dateisystem ist nur lesbar
~$ LANG=C sudo touch /lxc/x
touch: cannot touch `/lxc/x': Read-only file system
{% endcodeblock %}</p>

<h2>Dateisysteme innerhalb der LXC-Container</h2>

<p>{% codeblock Dateisysteme lang:sh %}
container~$ df
Filesystem               1K-blocks     Used Available Use% Mounted on
/dev/mapper/datavg-lxclv  41943040 13871816  26684544  35% /
none                        816864       76    816788   1% /run
none                          5120        0      5120   0% /run/lock
none                       4084308        0   4084308   0% /run/shm
{% endcodeblock %}</p>

<h2>Korrekturen</h2>

<ul>
<li>Bei Verwendung des 3.10-er-Kernels nach dem Stoppen eines Containers: <code>sudo mount -o remount,rw /dev/mapper/datavg-lxclv</code> ausführen</li>
<li>Immer nur den 3.8-er-Kernel verwenden</li>
<li>Innerhalb des Containers /etc/init.d/umountroot &ldquo;abklemmen&rdquo;:
<code>sudo update-rc.d -f umountroot remove</code></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[LXC: Probleme bei der Initialisierung des Netzwerkes]]></title>
    <link href="http://uli-heller.github.com/blog/2013/07/26/lxc-networking/"/>
    <updated>2013-07-26T15:00:00+02:00</updated>
    <id>http://uli-heller.github.com/blog/2013/07/26/lxc-networking</id>
    <content type="html"><![CDATA[<p>Seit einiger Zeit verwende ich LXC als Ergänzung zu VirtualBox.
Bislang läuft das weitgehend problemlos.
Merkwürdigerweise habe einige LXC-Container seit heute ein
Problem beim Start: Es dauert endlos, bis der Login-Prompt erscheint
und das Netzwerk funktioniert nicht. Betroffen sind auch Container,
die früher anstandslos gelaufen sind.</p>

<!-- more -->


<h2>Logs</h2>

<h3>Host: /var/Log/syslog</h3>

<p>{% codeblock Host:/var/log/syslog %}
Jul 26 13:12:53 uli-hp-ssd dnsmasq-dhcp[1571]: DHCPDISCOVER(lxcbr0) 00:16:3e:84:7a:82
Jul 26 13:12:53 uli-hp-ssd dnsmasq-dhcp[1571]: DHCPOFFER(lxcbr0) 10.0.3.14 00:16:3e:84:7a:82
Jul 26 13:13:13 uli-hp-ssd dnsmasq-dhcp[1571]: DHCPDISCOVER(lxcbr0) 00:16:3e:84:7a:82
Jul 26 13:13:13 uli-hp-ssd dnsmasq-dhcp[1571]: DHCPOFFER(lxcbr0) 10.0.3.14 00:16:3e:84:7a:82
Jul 26 13:13:24 uli-hp-ssd dnsmasq-dhcp[1571]: DHCPDISCOVER(lxcbr0) 00:16:3e:84:7a:82
Jul 26 13:13:24 uli-hp-ssd dnsmasq-dhcp[1571]: DHCPOFFER(lxcbr0) 10.0.3.14 00:16:3e:84:7a:82
Jul 26 13:13:35 uli-hp-ssd dnsmasq-dhcp[1571]: DHCPDISCOVER(lxcbr0) 00:16:3e:84:7a:82
Jul 26 13:13:35 uli-hp-ssd dnsmasq-dhcp[1571]: DHCPOFFER(lxcbr0) 10.0.3.14 00:16:3e:84:7a:82
Jul 26 13:13:53 uli-hp-ssd dnsmasq-dhcp[1571]: DHCPDISCOVER(lxcbr0) 00:16:3e:84:7a:82
{% endcodeblock %}</p>

<h3>Container: /var/log/syslog</h3>

<p>{% codeblock Container:/var/log/syslog %}
Jul 26 11:12:53 localhost dhclient: DHCPDISCOVER on eth0 to 255.255.255.255 port 67 interval 17
Jul 26 11:12:53 localhost dhclient: 5 bad udp checksums in 5 packets
Jul 26 11:13:10 localhost dhclient: DHCPDISCOVER on eth0 to 255.255.255.255 port 67 interval 14
Jul 26 11:13:24 localhost dhclient: DHCPDISCOVER on eth0 to 255.255.255.255 port 67 interval 11
Jul 26 11:13:35 localhost dhclient: DHCPDISCOVER on eth0 to 255.255.255.255 port 67 interval 15
Jul 26 11:13:50 localhost dhclient: DHCPDISCOVER on eth0 to 255.255.255.255 port 67 interval 11
Jul 26 11:14:01 localhost dhclient: DHCPDISCOVER on eth0 to 255.255.255.255 port 67 interval 10
Jul 26 11:14:01 localhost dhclient: 5 bad udp checksums in 5 packets
Jul 26 11:14:11 localhost dhclient: DHCPDISCOVER on eth0 to 255.255.255.255 port 67 interval 15
Jul 26 11:14:26 localhost dhclient: DHCPDISCOVER on eth0 to 255.255.255.255 port
{% endcodeblock %}</p>

<h2>Abhilfe</h2>

<h3>Temporäre Abhilfe</h3>

<p>Abhilfe schafft die Ausführung vom nachfolgenden Befehl auf dem Host:</p>

<p><code>
sudo iptables -A POSTROUTING -t mangle -p udp --dport bootpc -j CHECKSUM --checksum-fill
</code></p>

<p>Die Abhilfe ist hier beschrieben: <a href="https://bugs.launchpad.net/ubuntu/+source/isc-dhcp/+bug/930962/comments/14">https://bugs.launchpad.net/ubuntu/+source/isc-dhcp/+bug/930962/comments/14</a></p>

<h3>Dauerhafte Abhilfe</h3>

<p>Eine dauerhafte Abhilfe schafft die Aktualisierung des Paketes
&ldquo;isc-dhcp-client&rdquo; auf Version 4.1.ESV-R4-0ubuntu5.8 oder neuer.
Das geht ganz normal mit <code>apt-get update; apt-get upgrade</code>.
Ich hatte zuvor 4.1.ESV-R4-0ubuntu5.5 im Container.</p>

<h2>Nachtrag: Ursache</h2>

<p>Das Problem wurde ziemlich sicher verursacht durch den Einsatz von
einem 3.10-er Kernel auf dem Host. Nach dem &ldquo;Runterschalten&rdquo; auf 3.8
laufen die Container auch wieder ohne Aktualisierung von
&ldquo;isc-dhcp-client&rdquo;.</p>
]]></content>
  </entry>
  
</feed>
