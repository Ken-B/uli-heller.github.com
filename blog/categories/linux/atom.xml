<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Linux | Was ich so treibe...]]></title>
  <link href="http://uli-heller.github.com/blog/categories/linux/atom.xml" rel="self"/>
  <link href="http://uli-heller.github.com/"/>
  <updated>2013-08-05T07:57:24+02:00</updated>
  <id>http://uli-heller.github.com/</id>
  <author>
    <name><![CDATA[Uli Heller]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Octopress und Git ohne Umbenennung]]></title>
    <link href="http://uli-heller.github.com/blog/2013/08/05/octopress-git/"/>
    <updated>2013-08-05T08:00:00+02:00</updated>
    <id>http://uli-heller.github.com/blog/2013/08/05/octopress-git</id>
    <content type="html"><![CDATA[<p>Octopress hat die Eigenart, bei Verwendung von Git als &ldquo;Deployment-Methode&rdquo;
die Zweige umzubenennen:</p>

<ul>
<li>Umbenennung: origin &ndash;> octopress</li>
<li>Neuanlage:   origin &lt;&ndash; repo_url</li>
<li>Umbenennung: master &ndash;> source</li>
<li>etc.</li>
</ul>


<p>Die ganze Umbenennerei gefällt mir garnicht. Ich mag&rsquo;s so:</p>

<ul>
<li>uli-octopress: Das ist mein &ldquo;normales&rdquo; GitHub-Repository, in dem ich alle
Quelltexte meiner Octopress-Installation halte</li>
<li>uli-heller.github.com: Das ist das GitHub-Repository, in dem ich die
generierten HTML-Seiten veröffentliche</li>
</ul>


<!-- more -->


<h2>uli-octopress</h2>

<p>Hierbei gibt es keine Besonderheiten. Einfach das Repository in GitHub
anlegen und klonen wie üblich.</p>

<h2>uli-heller.github.com</h2>

<p>Am besten erstmal einfach leer anlegen mit einem Branch namens &ldquo;master&rdquo;.</p>

<h2>Deployment-Methode konfigurieren</h2>

<h3>_deploy</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>Verzeichnis _deploy </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span><span class="nb">cd </span>uli-octopress&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;uli-octopress<span class="nv">$ </span>git clone git@github.com:uli-heller/uli-heller.github.com.git
</span><span class='line'>Klone nach &amp;lsquo;uli-heller.github.com&amp;rsquo;&amp;hellip;
</span><span class='line'>remote: Counting objects: 14438, <span class="k">done</span>.
</span><span class='line'>remote: Compressing objects: 100% <span class="o">(</span>3999/3999<span class="o">)</span>, <span class="k">done</span>.
</span><span class='line'>remote: Total 14438 <span class="o">(</span>delta 7274<span class="o">)</span>, reused 13662 <span class="o">(</span>delta 6502<span class="o">)</span>
</span><span class='line'>Empfange Objekte: 100% <span class="o">(</span>14438/14438<span class="o">)</span>, 16.14 MiB | 218.00 KiB/s, <span class="k">done</span>.
</span><span class='line'>Löse Unterschiede auf: 100% <span class="o">(</span>7274/7274<span class="o">)</span>, <span class="k">done</span>.
</span><span class='line'>Checking connectivity&amp;hellip; <span class="k">done</span>&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;uli-octopress<span class="nv">$ </span>mv uli-heller.github.com _deploy
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>Rakefile</h3>

<p>Nun noch Anpassungen an Rakefile:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>Anpassungen am Rakefile </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='diff'><span class='line'><span class="gh">diff &amp;mdash;git a/Rakefile b/Rakefile</span>
</span><span class='line'><span class="gh">index f3ada93..321c3c5 100644</span>
</span><span class='line'>&amp;mdash;&amp;ndash; a/Rakefile
</span><span class='line'><span class="gi">+++ b/Rakefile</span>
</span><span class='line'><span class="gu">@@ -9,10 +9,10 @@ ssh_port       = &amp;ldquo;22&amp;rdquo;</span>
</span><span class='line'> document_root  = &amp;ldquo;~/website.com/&amp;rdquo;
</span><span class='line'> rsync_delete   = false
</span><span class='line'> rsync_args     = &amp;ldquo;&amp;rdquo;  # Any extra arguments to pass to rsync
</span><span class='line'><span class="gd">-deploy_default = &amp;ldquo;rsync&amp;rdquo;</span>
</span><span class='line'><span class="gi">+deploy_default = &amp;ldquo;push&amp;rdquo;&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;p&gt; # This will be configured for you when you run config_deploy
</span><span class='line'><span class="gd">-deploy_branch  = &amp;ldquo;gh-pages&amp;rdquo;</span>
</span><span class='line'><span class="gi">+deploy_branch  = &amp;ldquo;master&amp;rdquo;&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;p&gt; ## &amp;mdash; Misc Configs &amp;mdash; ##
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h2>Test</h2>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>Test </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>uli-octopress<span class="nv">$ </span>rake generate&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;h2&gt;Generating Site with Jekyll&lt;/h2&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;identical <span class="nb">source</span>/stylesheets/screen.css
</span><span class='line'>Configuration from /home/uli/git/octopress/_config.yml
</span><span class='line'>Building site: <span class="nb">source</span> &amp;ndash;&gt; public
</span><span class='line'>&amp;hellip;
</span><span class='line'>Successfully generated site: <span class="nb">source</span> &amp;ndash;&gt; public&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;uli-octopress<span class="nv">$ </span>rake preview
</span><span class='line'>Starting to watch <span class="nb">source </span>with Jekyll and Compass. Starting Rack on port 4000
</span><span class='line'><span class="o">[</span>2013-08-05 07:55:34<span class="o">]</span> INFO  WEBrick 1.3.1
</span><span class='line'>&amp;hellip;&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;uli-octopress<span class="nv">$ </span>rake deploy&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;
</span></code></pre></td></tr></table></div></figure></notextile></div></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Fotogallerie für Octopress]]></title>
    <link href="http://uli-heller.github.com/blog/2013/08/04/gallery/"/>
    <updated>2013-08-04T10:00:00+02:00</updated>
    <id>http://uli-heller.github.com/blog/2013/08/04/gallery</id>
    <content type="html"><![CDATA[<p>Zur Illustration der CentOS-Installation benötige ich eine Fotogallerie in
meiner Octopress-Installation. In diesem Artikel beschreibe ich das
Vorgehen.</p>

<!-- more -->


<h2>Neues Plugin: octopress-gallery</h2>

<p>Ich verwende das Plugin <a href="https://github.com/yortz/octopress_gallery">Octopress-Gallery</a>
zur Anzeige der Fotogallerie.</p>

<h3>Vorbereitungen</h3>

<p>Pfad zur Octopress-Installation: <code>OP=/home/UliHeller/octopress</code></p>

<h3>Grundinstallation</h3>

<ul>
<li>Auschecken: <code>git clone https://github.com/yortz/octopress_gallery.git</code></li>
<li>Kopieren

<ul>
<li><code>cp octopress_gallery/plugins/gallery_tag.rb "${OP}/plugins/."</code></li>
<li><code>cp octopress_gallery/plugins/mini_magick.rb "${OP}/plugins/."</code></li>
</ul>
</li>
<li>Erweitern von &ldquo;${OP}/Gemfile&rdquo;: Neue Zeile <code>gem 'mini_magick'</code></li>
<li>Installieren der Zusatz-Gems: <code>cd "${OP}"; bundle install</code></li>
</ul>


<h3>Bilder ablegen</h3>

<ul>
<li><code>mkdir "${OP}/sources/images/galleries"</code></li>
<li><code>mkdir "${OP}/sources/images/galleries/test"</code></li>
<li><code>cp *.jpg "${OP}/sources/images/galleries/test"</code></li>
</ul>


<h3>Gallerie konfigurieren</h3>

<h4>_config.yml</h4>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>mini_magick:&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;pre>&lt;code>test_thumbnail:
</span><span class='line'>  source: images/galleries/test
</span><span class='line'>  destination: images/galleries/test/thumbs
</span><span class='line'>  commands:
</span><span class='line'>    - thumbnail: "64x48^"
</span><span class='line'>    - crop: "64x48-0x0"
</span><span class='line'>&lt;/code>&lt;/pre>
</span><span class='line'>
</span><span class='line'>&lt;p></span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h4>Gallerie in Artikel &ldquo;anziehen&rdquo;</h4>

<p>Diese Zeile muß in einem Artikel auftauchen:</p>

<pre>
{{ 'test' | image_list }}
</pre>


<h2>Hübschere Präsentation mit Fotorama</h2>

<p>Die Präsentation der Gallerie ist in der Grundversion sehr schlicht.
Durch die Verwendung von <a href="http://fotorama.io/">Fotorama</a> wird das deutlich
hübscher.</p>

<h3>JQuery und Fotorama runterladen und ablegen</h3>

<ul>
<li><code>mkdir ${OP}/source/javascripts/fotorama</code></li>
<li><code>wget http://code.jquery.com/jquery-1.10.2.min.js</code></li>
<li><code>mv jquery-1.10.2.min.js ${OP}/source/javascripts/fotorama/.</code></li>
</ul>


<h3>Fotorama runterladen und ablegen</h3>

<ul>
<li><code>wget http://fotorama.s3.amazonaws.com/4.2.3/fotorama-4.2.3.zip</code></li>
<li><code>mv fotorama-4.2.3.zip fotorama-4.2.3.zip.gz</code></li>
<li><code>gzip -d fotorama-4.2.3.zip.gz</code></li>
<li><code>unzip -d tmp fotorama-4.2.3.zip</code></li>
<li><code>mv tmp/fotorama-4.2.3/foto* ${OP}/source/javascripts/fotorama/.</code></li>
<li><code>rm -rf tmp</code></li>
</ul>


<h3>Anpassungen an plugins/gallery_tag.rb</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>Anpassungen an plugins/gallery_tag.rb </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
</pre></td><td class='code'><pre><code class='diff'><span class='line'><span class="gh">diff &amp;mdash;git a/plugins/gallery_tag.rb b/plugins/gallery_tag.rb</span>
</span><span class='line'><span class="gh">index 6dc0c14..b2d8037 100644</span>
</span><span class='line'>&amp;mdash;&amp;ndash; a/plugins/gallery_tag.rb
</span><span class='line'><span class="gi">+++ b/plugins/gallery_tag.rb</span>
</span><span class='line'><span class="gu">@@ -4,14 +4,20 @@ module ImageList</span>
</span><span class='line'>   def image_list( name )&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;unless name == nil
</span><span class='line'> list = Array.new
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;ul&gt;
</span><span class='line'>&lt;li&gt; list &amp;lt;&amp;lt; %Q{&lt;script src=&quot;http://uli-heller.github.com/javascripts/fotorama/jquery-1.10.2.min.js&quot;&gt;&lt;/script&gt;}&lt;/li&gt;
</span><span class='line'>&lt;li&gt; list &amp;lt;&amp;lt; %Q{&lt;link href=&quot;http://uli-heller.github.com/javascripts/fotorama/fotorama.css&quot; rel=&quot;stylesheet&quot;&gt;}&lt;/li&gt;
</span><span class='line'>&lt;li&gt; list &amp;lt;&amp;lt; %Q{&lt;script src=&quot;http://uli-heller.github.com/javascripts/fotorama/fotorama.js&quot;&gt;&lt;/script&gt;}&lt;/li&gt;
</span><span class='line'>&lt;li&gt; list &amp;lt;&amp;lt; %Q{&amp;lt;div class=&amp;ldquo;fotorama&amp;rdquo; data-autoplay=&amp;ldquo;3000&amp;rdquo; data-transition=&amp;ldquo;dissolve&amp;rdquo; data-nav=&amp;ldquo;thumbs&amp;rdquo; data-allow-full-screen=&amp;ldquo;true&amp;rdquo; data-keyboard=&amp;ldquo;true&amp;rdquo; data-w
</span><span class='line'> dir = Dir.new( File.join(BASE_DIR, name) )&lt;/li&gt;
</span><span class='line'>&lt;li&gt; dir.each do | d |&lt;/li&gt;
</span><span class='line'>&lt;li&gt; dir.sort.each do | d |
</span><span class='line'>   image = File.basename(d, File.extname(d))
</span><span class='line'>   unless d =~ /^./ || d =~ /thumbs/&lt;/li&gt;
</span><span class='line'>&lt;li&gt;&lt;pre&gt;&lt;code&gt; list &amp;lt;&amp;lt; %Q{&amp;lt;a href=&quot;http://uli-heller.github.com/images/galleries/#{name}/#{d}&quot; rel=&quot;shadowbox&quot; title=&quot;#{image}&quot;&amp;gt;&amp;lt;img src=&quot;http://uli-heller.github.com/images/galleries/#{name}/thumbs/#{d}&quot; /&amp;gt;&amp;lt;/a&amp;gt;}
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;+#        list &amp;lt;&amp;lt; %Q{&lt;a href=&quot;http://uli-heller.github.com/images/galleries/#{name}/#{d}&quot; rel=&quot;shadowbox&quot; title=&quot;#{image}&quot;&gt;&lt;img src=&quot;http://uli-heller.github.com/images/galleries/#{name}/thumbs/#{d}&quot; /&gt;&lt;/a&gt;}&lt;/p&gt;&lt;/li&gt;
</span><span class='line'>&lt;li&gt;&lt;pre&gt;&lt;code&gt; list &amp;lt;&amp;lt; %Q{&amp;lt;a href=&quot;http://uli-heller.github.com/images/galleries/#{name}/#{d}&quot;&amp;gt;&amp;lt;img src=&quot;http://uli-heller.github.com/images/galleries/#{name}/thumbs/#{d}&quot;/&amp;gt;&amp;lt;/a&amp;gt;}
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;   end
</span><span class='line'> end&lt;/p&gt;&lt;/li&gt;
</span><span class='line'>&lt;li&gt; list.sort.join( &amp;ldquo;\n&amp;rdquo; )&lt;/li&gt;
</span><span class='line'>&lt;li&gt; list &amp;lt;&amp;lt; %Q{&lt;/div&gt; &lt;!--class=&quot;fotorama&quot; data-nav=&quot;thumbs&quot; --&gt;}
</span><span class='line'><span class="gi">+#    list.sort.join( &amp;ldquo;\n&amp;rdquo; )</span>
</span><span class='line'>end
</span><span class='line'>end
</span><span class='line'>end
</span></code></pre></td></tr></table></div></figure></notextile></div></li>
</ul>


<h2>Probleme</h2>

<h3>Liquid Exception: no implicit conversion of nil into String in atom.xml</h3>

<p>Die Ausführung von <code>rake generate</code> bricht ab mit einer Fehlermeldung:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ rake generate&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;h2>Generating Site with Jekyll&lt;/h2>
</span><span class='line'>
</span><span class='line'>&lt;p>unchanged sass/print.scss
</span><span class='line'>identical source/stylesheets/screen.css
</span><span class='line'>Configuration from &hellip;/dp-octopress/_config.yml
</span><span class='line'>Building site: source &ndash;> public
</span><span class='line'>Liquid Exception: no implicit conversion of nil into String in atom.xml
</span><span class='line'>&hellip;/dp-octopress/plugins/gallery_tag.rb:10:in &lt;code>join'
</span><span class='line'>.../dp-octopress/plugins/gallery_tag.rb:10:in&lt;/code>image_list'
</span><span class='line'>&hellip;</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>Abhilfe: Anpassungen an plugins/gallery_tag.rb vornehmen:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>Anpassungen an plugins/gallery_tag.rb </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class='diff'><span class='line'><span class="gh">diff &amp;mdash;git a/plugins/gallery_tag.rb b/plugins/gallery_tag.rb</span>
</span><span class='line'><span class="gh">index f895040..6dc0c14 100644</span>
</span><span class='line'>&amp;mdash;&amp;ndash; a/plugins/gallery_tag.rb
</span><span class='line'><span class="gi">+++ b/plugins/gallery_tag.rb</span>
</span><span class='line'><span class="gu">@@ -2,6 +2,7 @@ BASE_DIR = &amp;lsquo;source/images/galleries&amp;rsquo;&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;p&gt; module ImageList
</span><span class='line'>   def image_list( name )
</span><span class='line'><span class="gi">+   unless name == nil&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt; list = Array.new
</span><span class='line'> dir = Dir.new( File.join(BASE_DIR, name) )
</span><span class='line'> dir.each do | d |
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;@@ -11,6 +12,7 @@ module ImageList&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;   end
</span><span class='line'> end
</span><span class='line'> list.sort.join( &quot;\n&quot; )
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;ul&gt;
</span><span class='line'>&lt;li&gt;end
</span><span class='line'>end
</span><span class='line'>end
</span></code></pre></td></tr></table></div></figure></notextile></div></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Subversion 1.8.1 für Ubuntu-12.04]]></title>
    <link href="http://uli-heller.github.com/blog/2013/07/27/subversion_1.8.1/"/>
    <updated>2013-07-27T10:00:00+02:00</updated>
    <id>http://uli-heller.github.com/blog/2013/07/27/subversion_1.8.1</id>
    <content type="html"><![CDATA[<p>Vor ein paar Tagen wurde Subversion-1.8.1 veröffentlicht.
Hier meine Versuche, ein Paket für Ubuntu-12.04 zu bauen.
Eingeflossen sind dabei auch die gescheiterten Versuche
mit Subversion-1.8.0. Schlußendlich kommt eine für mich funktionierende
Version von Subversion-1.8.1 heraus.</p>

<!-- more -->


<h2>Ausgangpunkt: Subversion-1.8.0</h2>

<p>Mein Ausgangspunkt sind meine kaputten Pakete für Subversion-1.8.0.</p>

<pre><code>$ cd subversion-1.8.0
$ uupdate -u ../subversion-1.8.1
$ cd ../subversion-1.8.1
</code></pre>

<p>Nun habe ich folgende Generierungs-Abhängigkeiten (build dependencies)
festgelegt:</p>

<ul>
<li>subversion: serf-1.2.1 und sqlite-3.7.15</li>
<li>serf: sqlite-3.7.15</li>
</ul>


<h2>Erste Hürde: Sqlite3-3.7.15</h2>

<p>Subversion benötigt eine relativ aktuelle Version von Sqlite3. Die
Standard-Version von Ubuntu-12.04 ist zu alt. Ich habe mir so beholfen:</p>

<ul>
<li>Quellpakete von sqlite3-3.7.15.2 aus &ldquo;raring&rdquo; runtergeladen</li>
<li>Ein paar kleine Anpassungen an debian/rules vorgenommen, damit
tcl85 an der richtigen Stelle ausgelesen wird</li>
<li>Pakete erzeugen mit <code>dpkg-buildpackage</code></li>
<li>Pakete installieren</li>
</ul>


<h2>Zweite Hürde: Serf-1.2.1</h2>

<ul>
<li>Diverse Umstellungen nötig, damit die Generierung durchläuft</li>
<li>Pakete erzeugen mit <code>dpkg-buildpackage</code></li>
<li>Pakete installieren</li>
</ul>


<h2>Subversion-1.8.1</h2>

<ul>
<li>Kann nun wie üblich mit <code>dpkg-buildpackage</code> erzeugt werden</li>
</ul>


<h2>Kurztests: Installation und Funktionsweise</h2>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ sudo dpkg -i subversion_1.8.1-3dp12~precise1_amd64.deb libsvn1_1.8.1-3dp12~precise1_amd64.deb libserf1_1.2.1-0dp01~precise1_amd64.deb
</span><span class='line'>$ sudo dpkg -i sqlite3_3.7.15.2-1dp01~precise1_amd64.deb libsqlite3-0_3.7.15.2-1dp01~precise1_amd64.deb
</span><span class='line'>$ svn &mdash;version
</span><span class='line'>svn, Version 1.8.1 (r1503906)
</span><span class='line'>   übersetzt am Jul 26 2013, um 15:38:27 auf x86_64-pc-linux-gnu&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>Copyright &copy; 2013 The Apache Software Foundation.
</span><span class='line'>Diese Software besteht aus Beiträgen vieler Personen;
</span><span class='line'>siehe Datei NOTICE für weitere Informationen.
</span><span class='line'>Subversion ist Open Source Software, siehe &lt;a href="http://subversion.apache.org/">http://subversion.apache.org/&lt;/a>&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>Die folgenden ZugriffsModule (ZM) für Projektarchive stehen zur Verfügung:&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;ul>
</span><span class='line'>&lt;li>ra_svn : Modul zum Zugriff auf ein Projektarchiv über das svn-Netzwerkprotokoll.
</span><span class='line'>
</span><span class='line'>&lt;ul>
</span><span class='line'>&lt;li>mit Cyrus-SASL-Authentifizierung&lt;/li>
</span><span class='line'>&lt;li>behandelt Schema »svn«&lt;/li>
</span><span class='line'>&lt;/ul>
</span><span class='line'>&lt;/li>
</span><span class='line'>&lt;li>ra_local : Modul zum Zugriff auf ein Projektarchiv auf der lokalen Festplatte
</span><span class='line'>
</span><span class='line'>&lt;ul>
</span><span class='line'>&lt;li>behandelt Schema »file«&lt;/li>
</span><span class='line'>&lt;/ul>
</span><span class='line'>&lt;/li>
</span><span class='line'>&lt;li>ra_serf : Modul zum Zugriff auf ein Projektarchiv über das Protokoll WebDAV mittels serf.
</span><span class='line'>
</span><span class='line'>&lt;ul>
</span><span class='line'>&lt;li>behandelt Schema »http«&lt;/li>
</span><span class='line'>&lt;li>behandelt Schema »https«
</span><span class='line'>$ cd svn/my-project
</span><span class='line'>$ svn status
</span><span class='line'>svn: E155036: Please see the &lsquo;svn upgrade&rsquo; command
</span><span class='line'>svn: E155036: The working copy at &lsquo;/home/uli/svn/my-project&rsquo;
</span><span class='line'>is too old (format 29) to work with client version &lsquo;1.8.1 (r1503906)&rsquo; (expects format 31). You need to upgrade the working copy first.
</span><span class='line'>$ svn upgrade
</span><span class='line'>Upgraded &lsquo;.&rsquo;
</span><span class='line'>$ svn status
</span><span class='line'>$ svn update
</span><span class='line'>Updating &lsquo;.&rsquo;:
</span><span class='line'>A    minianwendungjsf/.classpath
</span><span class='line'>A    minianwendungjsf/ant
</span><span class='line'>A    minianwendungjsf/ant/build.xml
</span><span class='line'>A    minianwendungjsf/.project
</span><span class='line'>&hellip;
</span><span class='line'>A    EJB3.1_Test/login.config
</span><span class='line'>Updated to revision 13.
</span><span class='line'>$ svn checkout &lt;a href="https://.....">https://.....&lt;/a>
</span><span class='line'>A    my-project2/git-test
</span><span class='line'>A    my-project2/git-test/Hello.txt
</span><span class='line'>A    my-project2/git-test/01-git-neu.txt
</span><span class='line'>&hellip;
</span><span class='line'>A    my-project2/testfolder2
</span><span class='line'>A    my-project2/testfolder2/testbin-ticket9.odt
</span><span class='line'>Checked out revision 78.</span></code></pre></td></tr></table></div></figure></notextile></div></li>
</ul>
</li>
</ul>


<p>Also: Grobtest ist OK.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[LXC: Probleme mit 3.10-er-Kernel -  Das Dateisystem ist nur lesbar]]></title>
    <link href="http://uli-heller.github.com/blog/2013/07/27/lxc-kernel-310/"/>
    <updated>2013-07-27T09:00:00+02:00</updated>
    <id>http://uli-heller.github.com/blog/2013/07/27/lxc-kernel-310</id>
    <content type="html"><![CDATA[<p>Seit einiger Zeit verwende ich LXC als Ergänzung zu VirtualBox.
Bislang läuft das weitgehend problemlos. Merkwürdigerweise
bekomme ich seit ein paar Tagen immer wieder Fehlermeldungen
bezüglich BTRFS: &ldquo;Das Dateisystem ist nur lesbar&rdquo;.</p>

<p>Erst dachte ich, BTRFS hätte &lsquo;nen Schuß. Detailliertere Tests zeigen,
dass der 3.10-er-Kernel wohl &ldquo;Schuld&rdquo; ist.</p>

<!-- more -->


<h2>Meine LXC-Umgebung</h2>

<ul>
<li>Ubuntu 12.04</li>
<li>3.8-er-Kernel oder auch 3.10-er-Kernel</li>
<li>/dev/mapper/datavg-lxlv ist eingebunden unter /lxc und ist ein
BTRFS-Dateisystem</li>
<li>Alle LXC-Container liegen unter /lxc, also auf einem BTRFS-Dateisystem</li>
</ul>


<h2>Runterfahren eines LXC-Containers unter 3.8</h2>

<p>Beim 3.8-er-Kernel sieht man eine Fehlermeldung bzgl.
meiner BTRFS-Partition: Sie kann <em>nicht</em> umgehängt werden mit
Nur-Lesen-Zugriff.</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>Runterfahren mit Kernel 3.8 </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>~<span class="nv">$ </span>sudo poweroff
</span><span class='line'>&amp;hellip;
</span><span class='line'>umount: /run/lock: not mounted
</span><span class='line'>umount: /run/shm: not mounted
</span><span class='line'>mount: cannot mount block device /dev/mapper/datavg-lxclv <span class="nb">read</span>-only
</span><span class='line'> * Will now halt
</span><span class='line'>~<span class="nv">$ </span>sudo touch  /lxc/x
</span><span class='line'>~<span class="nv">$ </span>sudo rm  /lxc/x
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h2>Runterfahren eines LXC-Containers unter 3.10</h2>

<p>Beim 3.10-er-Kernel sieht man keine Fehlermeldung bzgl.
meiner BTRFS-Partition, also kann sie vermutlich umgehängt werden mit
Nur-Lesen-Zugriff. Dementsprechend ist sie danach &ldquo;nur-lesend&rdquo;
eingehängt und der Inhalt von /lxc kann nicht mehr modifiziert
werden.</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>Runterfahren mit Kernel 3.10 </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>~<span class="nv">$ </span>sudo poweroff
</span><span class='line'>&amp;hellip;
</span><span class='line'>umount: /run/lock: not mounted
</span><span class='line'>umount: /run/shm: not mounted
</span><span class='line'> * Will now halt
</span><span class='line'>~<span class="nv">$ </span>sudo touch /lxc/x
</span><span class='line'>touch: »/lxc/x“ kann nicht berührt werden: Das Dateisystem ist nur lesbar
</span><span class='line'>~<span class="nv">$ LANG</span><span class="o">=</span>C sudo touch /lxc/x
</span><span class='line'>touch: cannot touch <span class="sb">`</span>/lxc/x<span class="err">&#39;</span>: Read-only file system
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h2>Dateisysteme innerhalb der LXC-Container</h2>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>Dateisysteme </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>container~<span class="nv">$ </span>df
</span><span class='line'>Filesystem               1K-blocks     Used Available Use% Mounted on
</span><span class='line'>/dev/mapper/datavg-lxclv  41943040 13871816  26684544  35% /
</span><span class='line'>none                        816864       76    816788   1% /run
</span><span class='line'>none                          5120        0      5120   0% /run/lock
</span><span class='line'>none                       4084308        0   4084308   0% /run/shm
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h2>Korrekturen</h2>

<ul>
<li>Bei Verwendung des 3.10-er-Kernels nach dem Stoppen eines Containers: <code>sudo mount -o remount,rw /dev/mapper/datavg-lxclv</code> ausführen</li>
<li>Immer nur den 3.8-er-Kernel verwenden</li>
<li>Innerhalb des Containers /etc/init.d/umountroot &ldquo;abklemmen&rdquo;:
<code>sudo update-rc.d -f umountroot remove</code></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[LXC: Probleme bei der Initialisierung des Netzwerkes]]></title>
    <link href="http://uli-heller.github.com/blog/2013/07/26/lxc-networking/"/>
    <updated>2013-07-26T15:00:00+02:00</updated>
    <id>http://uli-heller.github.com/blog/2013/07/26/lxc-networking</id>
    <content type="html"><![CDATA[<p>Seit einiger Zeit verwende ich LXC als Ergänzung zu VirtualBox.
Bislang läuft das weitgehend problemlos.
Merkwürdigerweise habe einige LXC-Container seit heute ein
Problem beim Start: Es dauert endlos, bis der Login-Prompt erscheint
und das Netzwerk funktioniert nicht. Betroffen sind auch Container,
die früher anstandslos gelaufen sind.</p>

<!-- more -->


<h2>Logs</h2>

<h3>Host: /var/Log/syslog</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>Host:/var/log/syslog </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Jul 26 13:12:53 uli-hp-ssd dnsmasq-dhcp[1571]: DHCPDISCOVER(lxcbr0) 00:16:3e:84:7a:82
</span><span class='line'>Jul 26 13:12:53 uli-hp-ssd dnsmasq-dhcp[1571]: DHCPOFFER(lxcbr0) 10.0.3.14 00:16:3e:84:7a:82
</span><span class='line'>Jul 26 13:13:13 uli-hp-ssd dnsmasq-dhcp[1571]: DHCPDISCOVER(lxcbr0) 00:16:3e:84:7a:82
</span><span class='line'>Jul 26 13:13:13 uli-hp-ssd dnsmasq-dhcp[1571]: DHCPOFFER(lxcbr0) 10.0.3.14 00:16:3e:84:7a:82
</span><span class='line'>Jul 26 13:13:24 uli-hp-ssd dnsmasq-dhcp[1571]: DHCPDISCOVER(lxcbr0) 00:16:3e:84:7a:82
</span><span class='line'>Jul 26 13:13:24 uli-hp-ssd dnsmasq-dhcp[1571]: DHCPOFFER(lxcbr0) 10.0.3.14 00:16:3e:84:7a:82
</span><span class='line'>Jul 26 13:13:35 uli-hp-ssd dnsmasq-dhcp[1571]: DHCPDISCOVER(lxcbr0) 00:16:3e:84:7a:82
</span><span class='line'>Jul 26 13:13:35 uli-hp-ssd dnsmasq-dhcp[1571]: DHCPOFFER(lxcbr0) 10.0.3.14 00:16:3e:84:7a:82
</span><span class='line'>Jul 26 13:13:53 uli-hp-ssd dnsmasq-dhcp[1571]: DHCPDISCOVER(lxcbr0) 00:16:3e:84:7a:82</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h3>Container: /var/log/syslog</h3>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>Container:/var/log/syslog </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Jul 26 11:12:53 localhost dhclient: DHCPDISCOVER on eth0 to 255.255.255.255 port 67 interval 17
</span><span class='line'>Jul 26 11:12:53 localhost dhclient: 5 bad udp checksums in 5 packets
</span><span class='line'>Jul 26 11:13:10 localhost dhclient: DHCPDISCOVER on eth0 to 255.255.255.255 port 67 interval 14
</span><span class='line'>Jul 26 11:13:24 localhost dhclient: DHCPDISCOVER on eth0 to 255.255.255.255 port 67 interval 11
</span><span class='line'>Jul 26 11:13:35 localhost dhclient: DHCPDISCOVER on eth0 to 255.255.255.255 port 67 interval 15
</span><span class='line'>Jul 26 11:13:50 localhost dhclient: DHCPDISCOVER on eth0 to 255.255.255.255 port 67 interval 11
</span><span class='line'>Jul 26 11:14:01 localhost dhclient: DHCPDISCOVER on eth0 to 255.255.255.255 port 67 interval 10
</span><span class='line'>Jul 26 11:14:01 localhost dhclient: 5 bad udp checksums in 5 packets
</span><span class='line'>Jul 26 11:14:11 localhost dhclient: DHCPDISCOVER on eth0 to 255.255.255.255 port 67 interval 15
</span><span class='line'>Jul 26 11:14:26 localhost dhclient: DHCPDISCOVER on eth0 to 255.255.255.255 port</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<h2>Abhilfe</h2>

<h3>Temporäre Abhilfe</h3>

<p>Abhilfe schafft die Ausführung vom nachfolgenden Befehl auf dem Host:</p>

<p><code>
sudo iptables -A POSTROUTING -t mangle -p udp --dport bootpc -j CHECKSUM --checksum-fill
</code></p>

<p>Die Abhilfe ist hier beschrieben: <a href="https://bugs.launchpad.net/ubuntu/+source/isc-dhcp/+bug/930962/comments/14">https://bugs.launchpad.net/ubuntu/+source/isc-dhcp/+bug/930962/comments/14</a></p>

<h3>Dauerhafte Abhilfe</h3>

<p>Eine dauerhafte Abhilfe schafft die Aktualisierung des Paketes
&ldquo;isc-dhcp-client&rdquo; auf Version 4.1.ESV-R4-0ubuntu5.8 oder neuer.
Das geht ganz normal mit <code>apt-get update; apt-get upgrade</code>.
Ich hatte zuvor 4.1.ESV-R4-0ubuntu5.5 im Container.</p>

<h2>Nachtrag: Ursache</h2>

<p>Das Problem wurde ziemlich sicher verursacht durch den Einsatz von
einem 3.10-er Kernel auf dem Host. Nach dem &ldquo;Runterschalten&rdquo; auf 3.8
laufen die Container auch wieder ohne Aktualisierung von
&ldquo;isc-dhcp-client&rdquo;.</p>
]]></content>
  </entry>
  
</feed>
